import{i as e}from"./vuetify-C9xgp6aa.js";import{_ as l,e as a}from"./_plugin-vue_export-helper-A3NhfqB7.js";const{resolveComponent:t,createVNode:o,createElementVNode:n,withCtx:s,toDisplayString:i,createTextVNode:d,openBlock:r,createBlock:c,createCommentVNode:u,renderList:m,Fragment:p,createElementBlock:_,mergeProps:f,withKeys:v}=await e("vue"),y={class:"plugin-config"},b={key:2,class:"my-1"},h={class:"d-flex flex-column"},g={class:"d-flex flex-column"},x={class:"path-selector flex-grow-1 mr-2"},V={class:"path-selector flex-grow-1 ml-2"},k={class:"d-flex flex-column"},w={class:"path-selector flex-grow-1 mr-2"},U={class:"path-selector flex-grow-1 ml-2"},z={class:"basic-config"},C={class:"d-flex flex-column"},T={class:"path-selector flex-grow-1 mr-1"},S={class:"path-selector flex-grow-1 mx-1"},M={class:"d-flex flex-column"},R={class:"d-flex flex-column"},I={class:"path-selector flex-grow-1 mr-2"},P={class:"path-selector flex-grow-1 ml-2"},$={class:"d-flex flex-column"},L={class:"path-selector flex-grow-1 mr-2"},A={class:"path-selector flex-grow-1 ml-2"},D={class:"d-flex flex-column"},j={class:"d-flex flex-column"},E={class:"path-selector flex-grow-1 mr-2"},N={class:"path-selector flex-grow-1 ml-2"},q={class:"d-flex flex-column"},B={class:"path-selector flex-grow-1 mr-2"},K={class:"path-selector flex-grow-1 ml-2"},J={class:"d-flex flex-column"},O={class:"path-selector flex-grow-1 mr-2"},F={class:"path-selector flex-grow-1 ml-2"},G={class:"d-flex flex-column"},W={class:"d-flex flex-column"},H={class:"d-flex flex-column"},Y={key:0},Z={class:"d-flex flex-column"},Q={class:"d-flex align-center mb-2"},X={class:"text-caption text-medium-emphasis"},ee={class:"mb-3"},le={class:"d-flex flex-wrap gap-3"},ae={key:0},te={key:0},oe={key:0},ne={class:"text-caption"},se={class:"mb-1"},ie={class:"d-flex flex-column"},de={class:"d-flex ga-2"},re={class:"d-flex align-center mb-3"},ce={class:"d-flex align-center mb-3"},ue={class:"text-caption"},me={key:0},pe={key:0},_e={key:0,class:"d-flex justify-center my-3"},fe={key:1},ve={key:0},ye={class:"text-body-2"},be={key:1,class:"d-flex flex-column align-center py-3"},he={key:2},ge={class:"text-subtitle-2 mb-1"},xe={class:"text-body-2"},Ve={key:1,class:"d-flex flex-column align-center py-3"},ke={key:2,class:"d-flex flex-column align-center"},we={class:"d-flex flex-column align-center mb-3"},Ue=["src"],ze={class:"text-body-2 text-grey mb-1"},Ce={class:"text-subtitle-2 font-weight-medium text-primary"},Te={key:3,class:"d-flex flex-column align-center py-3"},Se={class:"text-caption mt-2 text-grey"},Me={key:1,class:"d-flex flex-column align-center py-3"},Re={key:2,class:"d-flex flex-column align-center"},Ie=["src"],Pe={class:"text-subtitle-2 font-weight-medium text-primary"},$e={key:3,class:"d-flex flex-column align-center py-3"},Le={key:1,class:"d-flex flex-column align-center py-3"},Ae={key:2},De={class:"d-flex flex-column"},je={class:"d-flex flex-column"},Ee={class:"d-flex flex-column"},Ne={class:"text-body-2 mt-1"},qe={class:"text-caption"},Be=["href"],Ke={class:"d-flex flex-column align-center"},Je=["src"],Oe={key:1,class:"d-flex flex-column align-center pa-8"},Fe={class:"d-flex flex-column align-center"},Ge=["src"],We={key:1,class:"d-flex flex-column align-center pa-8"},He={key:0,class:"w-100 mt-3"},Ye={key:3,class:"d-flex flex-column align-center py-3"},Ze={class:"mb-2"},Qe={key:0,class:"d-flex flex-column align-center py-4"},Xe={key:1,class:"d-flex flex-column align-center py-3"},el={key:2},ll={class:"text-subtitle-2 mb-1"},al={key:0,class:"mt-2"},tl={class:"mb-3"},ol={class:"d-flex align-center mb-2"},nl={class:"d-flex align-center mb-2"},sl={class:"text-caption"},il={class:"d-flex align-center mb-2"},dl={class:"text-caption"},rl={class:"d-flex align-center mb-2"},cl={class:"text-caption"},ul={class:"d-flex align-center mb-2"},ml={class:"text-caption"},pl={class:"d-flex align-center mb-2"},_l={class:"text-caption"},fl={class:"d-flex align-center mb-2"},{ref:vl,reactive:yl,computed:bl,onMounted:hl,onBeforeUnmount:gl,watch:xl}=await e("vue"),Vl="P115StrmHelper",kl=l({__name:"Config",props:{api:{type:[Object,Function],required:!0},initialConfig:{type:Object,default:()=>({})}},emits:["save","close","switch"],setup(e,{emit:l}){const kl=e,wl=l,Ul=vl(!0),zl=vl(!1),Cl=vl(!1),Tl=vl(!1),Sl=vl(!1),Ml=vl("category-strm"),Rl=vl("tab-transfer"),Il=vl("tab-pan-transfer"),Pl=vl("tab-sync-del"),$l=vl("tab-cache-config"),Ll=vl([]),Al=bl(()=>Ll.value.filter(e=>"emby"===e.type)),Dl=vl(!1),jl=vl(!1),El=vl(!0),Nl=vl((()=>{try{const e=localStorage.getItem("p115strmhelper_basic_config_expanded");return null!==e?JSON.parse(e):["basic-config"]}catch(e){return["basic-config"]}})()),ql=yl({language:"zh_CN",enabled:!1,notify:!1,strm_url_format:"pickcode",link_redirect_mode:"cookie",cookies:"",aliyundrive_token:"",password:"",moviepilot_address:"",user_rmt_mediaext:"mp4,mkv,ts,iso,rmvb,avi,mov,mpeg,mpg,wmv,3gp,asf,m4v,flv,m2ts,tp,f4v",user_download_mediaext:"srt,ssa,ass",transfer_monitor_enabled:!1,transfer_monitor_scrape_metadata_enabled:!1,transfer_monitor_scrape_metadata_exclude_paths:"",transfer_monitor_paths:"",transfer_mp_mediaserver_paths:"",transfer_monitor_media_server_refresh_enabled:!1,transfer_monitor_mediaservers:[],timing_full_sync_strm:!1,full_sync_overwrite_mode:"never",full_sync_remove_unless_strm:!1,full_sync_remove_unless_dir:!1,full_sync_remove_unless_file:!1,full_sync_media_server_refresh_enabled:!1,full_sync_mediaservers:[],full_sync_auto_download_mediainfo_enabled:!1,full_sync_strm_log:!0,full_sync_batch_num:5e3,full_sync_process_num:128,cron_full_sync_strm:"0 */7 * * *",full_sync_strm_paths:"",full_sync_iter_function:"iter_files_with_path_skim",full_sync_min_file_size:0,full_sync_process_rust:!1,full_sync_remove_unless_max_threshold:10,full_sync_remove_unless_stable_threshold:5,increment_sync_strm_enabled:!1,increment_sync_auto_download_mediainfo_enabled:!1,increment_sync_cron:"0 * * * *",increment_sync_strm_paths:"",increment_sync_mp_mediaserver_paths:"",increment_sync_scrape_metadata_enabled:!1,increment_sync_scrape_metadata_exclude_paths:"",increment_sync_media_server_refresh_enabled:!1,increment_sync_mediaservers:[],increment_sync_min_file_size:0,monitor_life_enabled:!1,monitor_life_auto_download_mediainfo_enabled:!1,monitor_life_paths:"",monitor_life_mp_mediaserver_paths:"",monitor_life_media_server_refresh_enabled:!1,monitor_life_mediaservers:[],monitor_life_event_modes:[],monitor_life_scrape_metadata_enabled:!1,monitor_life_scrape_metadata_exclude_paths:"",monitor_life_remove_mp_history:!1,monitor_life_remove_mp_source:!1,monitor_life_min_file_size:0,monitor_life_event_wait_time:0,share_strm_config:[],share_strm_mediaservers:[],share_strm_mp_mediaserver_paths:"",api_strm_config:[],api_strm_mediaservers:[],api_strm_mp_mediaserver_paths:"",api_strm_scrape_metadata_enabled:!1,api_strm_media_server_refresh_enabled:!1,clear_recyclebin_enabled:!1,clear_receive_path_enabled:!1,cron_clear:"0 */7 * * *",pan_transfer_enabled:!1,pan_transfer_paths:"",pan_transfer_unrecognized_path:"",share_recieve_paths:[],offline_download_paths:[],directory_upload_enabled:!1,directory_upload_mode:"compatibility",directory_upload_uploadext:"mp4,mkv,ts,iso,rmvb,avi,mov,mpeg,mpg,wmv,3gp,asf,m4v,flv,m2ts,tp,f4v",directory_upload_copyext:"srt,ssa,ass",directory_upload_path:[],nullbr_app_id:"",nullbr_api_key:"",tg_search_channels:[],same_playback:!1,error_info_upload:!1,upload_module_enhancement:!1,upload_module_skip_slow_upload:!1,upload_module_notify:!0,upload_module_wait_time:300,upload_module_wait_timeout:3600,upload_module_skip_upload_wait_size:0,upload_module_force_upload_wait_size:0,upload_module_skip_slow_upload_size:0,upload_open_result_notify:!1,upload_share_info:!0,upload_offline_info:!0,transfer_module_enhancement:!1,pan_transfer_takeover:!1,strm_url_template_enabled:!1,strm_url_template:"",strm_url_template_custom:"",strm_filename_template_enabled:!1,strm_filename_template:"",strm_filename_template_custom:"",strm_generate_blacklist:[],mediainfo_download_whitelist:[],mediainfo_download_blacklist:[],strm_url_encode:!1,storage_module:"u115",sync_del_enabled:!1,sync_del_notify:!0,sync_del_source:!1,sync_del_p115_library_path:"",sync_del_p115_force_delete_files:!1,sync_del_remove_versions:!1,sync_del_mediaservers:[]}),Bl=yl({text:"",type:"info"}),Kl=vl(""),Jl=vl(""),Ol=vl(""),Fl=vl(""),Gl=vl(""),Wl=vl(""),Hl=e=>{if(!e||"string"!=typeof e)return 0;const l=e.trim().match(/^(\d*\.?\d+)\s*(k|m|g|t)?b?$/i);if(!l)return 0;const a=parseFloat(l[1]);switch((l[2]||"").toLowerCase()){case"t":return Math.round(1024*a*1024*1024*1024);case"g":return Math.round(1024*a*1024*1024);case"m":return Math.round(1024*a*1024);case"k":return Math.round(1024*a);default:return Math.round(a)}},Yl=(e,l=2)=>{if(!+e)return"0 B";const a=l<0?0:l,t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(a))} ${["B","K","M","G","T"][t]}`},Zl=vl([{local:"",remote:""}]),Ql=vl([{local:"",remote:""}]),Xl=vl([{local:"",remote:"",enabled:!0}]),ea=vl([{local:"",remote:""}]),la=vl([{local:"",remote:""}]),aa=vl([{local:"",remote:""}]),ta=vl([{local:"",remote:""}]),oa=vl([{local:"",remote:""}]),na=vl([{local:"",remote:""}]),sa=vl([{path:""}]),ia=vl([{path:""}]),da=vl([{path:""}]),ra=vl([{path:""}]),ca=vl([{local:"",remote:""}]),ua=vl([{path:""}]),ma=vl([{src:"",dest_remote:"",dest_local:"",dest_strm:"",delete:!1}]),pa=vl([{mediaserver:"",moviepilot:"",p115:""}]),_a=vl([{extensions:"",names:"",paths:"",_use_extensions:!1,_use_names:!1,_use_paths:!1}]),fa=vl(!1),va=vl(""),ya=vl([{name:"",id:""}]),ba=()=>{ya.value.push({name:"",id:""})},ha=yl({show:!1,jsonText:"",error:""}),ga=yl({show:!1,isLocal:!0,loading:!1,error:null,currentPath:"/",items:[],selectedPath:"",callback:null,type:"",index:-1,fieldKey:null,targetConfigKeyForExclusion:null,originalPathTypeBackup:"",originalIndexBackup:-1}),xa=yl({show:!1,loading:!1,error:null,donateInfo:null,activeTab:"wechat",authorizationStatus:null}),Va=yl({show:!1,loading:!1,error:null,qrcode:"",uid:"",time:"",sign:"",tips:"请使用支付宝扫描二维码登录",status:"等待扫码",checkInterval:null,clientType:"alipaymini"}),ka=[{label:"支付宝",value:"alipaymini"},{label:"微信",value:"wechatmini"},{label:"安卓",value:"115android"},{label:"iOS",value:"115ios"},{label:"网页",value:"web"},{label:"PAD",value:"115ipad"},{label:"TV",value:"tv"}],wa=yl({show:!1,loading:!1,error:null,qrcode:"",t:"",ck:"",status:"等待扫码",checkIntervalId:null}),Ua=yl({show:!1,loading:!1,error:null,result:null}),za=yl({show:!1,loading:!1,mountDir:"",moviepilotAddress:"",generatedConfig:""}),Ca=yl({show:!1,loading:!1,path:"",result:null});xl(()=>ql.transfer_monitor_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());Zl.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===Zl.value.length&&(Zl.value=[{local:"",remote:""}])}catch(l){console.error("解析transfer_monitor_paths出错:",l),Zl.value=[{local:"",remote:""}]}else Zl.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.transfer_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());Ql.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===Ql.value.length&&(Ql.value=[{local:"",remote:""}])}catch(l){console.error("解析transfer_mp_mediaserver_paths出错:",l),Ql.value=[{local:"",remote:""}]}else Ql.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.full_sync_strm_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());Xl.value=l.map(e=>{const l=e.split("#"),a=l.length<3||"0"!==l[2].trim();return{local:l[0]||"",remote:l[1]||"",enabled:a}}),0===Xl.value.length&&(Xl.value=[{local:"",remote:"",enabled:!0}])}catch(l){console.error("解析full_sync_strm_paths出错:",l),Xl.value=[{local:"",remote:"",enabled:!0}]}else Xl.value=[{local:"",remote:"",enabled:!0}]},{immediate:!0}),xl(()=>ql.increment_sync_strm_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());ea.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===ea.value.length&&(ea.value=[{local:"",remote:""}])}catch(l){console.error("解析increment_sync_strm_paths出错:",l),ea.value=[{local:"",remote:""}]}else ea.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.increment_sync_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());la.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===la.value.length&&(la.value=[{local:"",remote:""}])}catch(l){console.error("解析increment_sync_mp_mediaserver_paths出错:",l),la.value=[{local:"",remote:""}]}else la.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.monitor_life_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());aa.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===aa.value.length&&(aa.value=[{local:"",remote:""}])}catch(l){console.error("解析monitor_life_paths出错:",l),aa.value=[{local:"",remote:""}]}else aa.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.monitor_life_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());ta.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===ta.value.length&&(ta.value=[{local:"",remote:""}])}catch(l){console.error("解析monitor_life_mp_mediaserver_paths出错:",l),ta.value=[{local:"",remote:""}]}else ta.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.pan_transfer_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());sa.value=l.map(e=>({path:e})),0===sa.value.length&&(sa.value=[{path:""}])}catch(l){console.error("解析pan_transfer_paths出错:",l),sa.value=[{path:""}]}else sa.value=[{path:""}]},{immediate:!0}),xl(()=>ql.api_strm_config,e=>{if(e&&Array.isArray(e))try{oa.value=e.map(e=>({local:e.local_path||"",remote:e.pan_path||""})),0===oa.value.length&&(oa.value=[{local:"",remote:""}])}catch(l){console.error("解析api_strm_config出错:",l),oa.value=[{local:"",remote:""}]}else oa.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.sync_del_p115_library_path,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());pa.value=l.map(e=>{const l=e.split("#");return{mediaserver:l[0]||"",moviepilot:l[1]||"",p115:l[2]||""}}),0===pa.value.length&&(pa.value=[{mediaserver:"",moviepilot:"",p115:""}])}catch(l){console.error("解析sync_del_p115_library_path出错:",l),pa.value=[{mediaserver:"",moviepilot:"",p115:""}]}else pa.value=[{mediaserver:"",moviepilot:"",p115:""}]},{immediate:!0}),xl(()=>ql.api_strm_mp_mediaserver_paths,e=>{if(e)try{const l=e.split("\n").filter(e=>e.trim());na.value=l.map(e=>{const l=e.split("#");return{local:l[0]||"",remote:l[1]||""}}),0===na.value.length&&(na.value=[{local:"",remote:""}])}catch(l){console.error("解析api_strm_mp_mediaserver_paths出错:",l),na.value=[{local:"",remote:""}]}else na.value=[{local:"",remote:""}]},{immediate:!0}),xl(()=>ql.share_recieve_paths,e=>{if(e&&Array.isArray(e))try{ia.value=e.map(e=>({path:"string"==typeof e?e:""})),0===ia.value.length&&(ia.value=[{path:""}])}catch(l){console.error("解析share_recieve_paths出错:",l),ia.value=[{path:""}]}else ia.value=[{path:""}]},{immediate:!0}),xl(()=>ql.offline_download_paths,e=>{if(e&&Array.isArray(e))try{da.value=e.map(e=>({path:"string"==typeof e?e:""})),0===da.value.length&&(da.value=[{path:""}])}catch(l){console.error("解析offline_download_paths出错:",l),da.value=[{path:""}]}else da.value=[{path:""}]},{immediate:!0}),xl(()=>ql.transfer_monitor_scrape_metadata_exclude_paths,e=>{if("string"==typeof e&&e.trim())try{const l=e.split("\n").filter(e=>e.trim());ra.value=l.map(e=>({path:e})),0===ra.value.length&&(ra.value=[{path:""}])}catch(l){console.error("解析 transfer_monitor_scrape_metadata_exclude_paths 出错:",l),ra.value=[{path:""}]}else ra.value=[{path:""}]},{immediate:!0}),xl(ra,e=>{if(!Array.isArray(e))return;const l=e.map(e=>e.path?.trim()).filter(e=>e).join("\n");ql.transfer_monitor_scrape_metadata_exclude_paths!==l&&(ql.transfer_monitor_scrape_metadata_exclude_paths=l)},{deep:!0}),xl(()=>ql.increment_sync_scrape_metadata_exclude_paths,e=>{if("string"==typeof e&&e.trim())try{const l=e.split("\n").filter(e=>e.trim());ca.value=l.map(e=>({path:e})),0===ca.value.length&&(ca.value=[{path:""}])}catch(l){console.error("解析 increment_sync_scrape_metadata_exclude_paths 出错:",l),ca.value=[{path:""}]}else ca.value=[{path:""}]},{immediate:!0}),xl(ca,e=>{if(!Array.isArray(e))return;const l=e.map(e=>e.path?.trim()).filter(e=>e).join("\n");ql.increment_sync_scrape_metadata_exclude_paths!==l&&(ql.increment_sync_scrape_metadata_exclude_paths=l)},{deep:!0}),xl(()=>ql.monitor_life_scrape_metadata_exclude_paths,e=>{if("string"==typeof e&&e.trim())try{const l=e.split("\n").filter(e=>e.trim());ua.value=l.map(e=>({path:e})),0===ua.value.length&&(ua.value=[{path:""}])}catch(l){console.error("解析 monitor_life_scrape_metadata_exclude_paths 出错:",l),ua.value=[{path:""}]}else ua.value=[{path:""}]},{immediate:!0}),xl(ua,e=>{if(!Array.isArray(e))return;const l=e.map(e=>e.path?.trim()).filter(e=>e).join("\n");ql.monitor_life_scrape_metadata_exclude_paths!==l&&(ql.monitor_life_scrape_metadata_exclude_paths=l)},{deep:!0}),xl(()=>ql.full_sync_remove_unless_strm,e=>{e||(ql.full_sync_remove_unless_dir=!1,ql.full_sync_remove_unless_file=!1)});const Ta=(e,l)=>e.map(e=>"panTransfer"===l?e.path?.trim():"fullSync"===l?`${e.local?.trim()}#${e.remote?.trim()}#${!1!==e.enabled?"1":"0"}`:`${e.local?.trim()}#${e.remote?.trim()}`).filter(e=>{if("panTransfer"===l)return e&&""!==e;if("fullSync"===l){const l=e.split("#");return l.length>=2&&(l[0]?.trim()||l[1]?.trim())}return"#"!==e&&""!==e}).join("\n"),Sa=async()=>{zl.value=!0,Bl.text="",Bl.type="info";try{ql.upload_module_skip_upload_wait_size=Hl(Kl.value)||0,ql.upload_module_force_upload_wait_size=Hl(Jl.value)||0,ql.upload_module_skip_slow_upload_size=Hl(Ol.value)||0,ql.full_sync_min_file_size=Hl(Fl.value)||0,ql.increment_sync_min_file_size=Hl(Gl.value)||0,ql.monitor_life_min_file_size=Hl(Wl.value)||0,ql.transfer_monitor_paths=Ta(Zl.value,"transfer"),ql.transfer_mp_mediaserver_paths=Ta(Ql.value,"mp"),ql.full_sync_strm_paths=Ta(Xl.value,"fullSync"),ql.increment_sync_strm_paths=Ta(ea.value,"incrementSync"),ql.increment_sync_mp_mediaserver_paths=Ta(la.value,"increment-mp"),ql.monitor_life_paths=Ta(aa.value,"monitorLife"),ql.monitor_life_mp_mediaserver_paths=Ta(ta.value,"monitorLifeMp"),ql.api_strm_config=oa.value.filter(e=>e.local?.trim()&&e.remote?.trim()).map(e=>({local_path:e.local.trim(),pan_path:e.remote.trim()})),ql.api_strm_mp_mediaserver_paths=Ta(na.value,"apiStrm-mp"),ql.sync_del_p115_library_path=pa.value.filter(e=>e.mediaserver?.trim()||e.moviepilot?.trim()||e.p115?.trim()).map(e=>`${e.mediaserver||""}#${e.moviepilot||""}#${e.p115||""}`).join("\n"),Array.isArray(ql.sync_del_mediaservers)&&0===ql.sync_del_mediaservers.length&&(ql.sync_del_mediaservers=null),ql.pan_transfer_paths=Ta(sa.value,"panTransfer"),ql.share_recieve_paths=ia.value.filter(e=>e.path?.trim()).map(e=>e.path),ql.offline_download_paths=da.value.filter(e=>e.path?.trim()).map(e=>e.path),ql.directory_upload_path=ma.value.filter(e=>e.src?.trim()||e.dest_remote?.trim()||e.dest_local?.trim()||e.dest_strm?.trim());const e=ya.value.filter(e=>e.name&&""!==e.name.trim()&&e.id&&""!==e.id.trim());ql.tg_search_channels=e,ql.fuse_strm_takeover_rules=_a.value.map(e=>({extensions:"string"==typeof e.extensions?e.extensions.split("\n").map(e=>e.trim()).filter(e=>e):e.extensions||[],names:"string"==typeof e.names?e.names.split("\n").map(e=>e.trim()).filter(e=>e):e.names||[],paths:"string"==typeof e.paths?e.paths.split("\n").map(e=>e.trim()).filter(e=>e):e.paths||[]})).filter(e=>e.extensions.length>0||e.names.length>0||e.paths.length>0),wl("save",JSON.parse(JSON.stringify(ql))),Bl.text="配置已发送保存请求，请稍候...",Bl.type="info"}catch(e){console.error("发送保存事件时出错:",e),Bl.text=`发送保存请求时出错: ${e.message||"未知错误"}`,Bl.type="error"}finally{zl.value=!1,setTimeout(()=>{"info"!==Bl.type&&"error"!==Bl.type||(Bl.text="")},5e3)}},Ma=async()=>{va.value="正在获取...";try{const e=await kl.api.get(`plugin/${Vl}/get_machine_id`);if(!e||!e.machine_id)throw new Error(e?.msg||"未能获取设备ID");va.value=e.machine_id,Bl.text="设备ID获取成功！",Bl.type="success"}catch(e){va.value="获取失败，请重试",Bl.text=`获取设备ID失败: ${e.message||"未知错误"}`,Bl.type="error"}setTimeout(()=>{"success"!==Bl.type&&"info"!==Bl.type||(Bl.text="")},3e3)},Ra=e=>{if(!e)return"未知";try{return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch(l){return console.error("格式化时间失败:",l),e}},Ia=async()=>{xa.show=!0,xa.loading=!0,xa.error=null,xa.donateInfo=null,xa.authorizationStatus=null;try{const[e,l]=await Promise.all([kl.api.get(`plugin/${Vl}/get_donate_info`),kl.api.get(`plugin/${Vl}/get_authorization_status`)]);if(!e||0!==e.code||!e.data)throw new Error(e?.msg||"获取捐赠信息失败");xa.donateInfo=e.data,e.data.wechat?.enabled?xa.activeTab="wechat":e.data.alipay?.enabled&&(xa.activeTab="alipay"),l&&0===l.code&&l.data&&(xa.authorizationStatus=l.data)}catch(e){xa.error=`加载捐赠信息失败: ${e.message||"未知错误"}`,console.error("获取捐赠信息失败:",e)}finally{xa.loading=!1}},Pa=()=>{xa.show=!1,xa.error=null,xa.donateInfo=null,xa.authorizationStatus=null},$a=async()=>{fa.value=!1,await La()},La=async()=>{Cl.value=!0,Bl.text="";try{if(!ql.enabled)throw new Error("插件未启用，请先启用插件");if(!ql.cookies||""===ql.cookies.trim())throw new Error("请先设置115 Cookie");if(ql.full_sync_strm_paths=Ta(Xl.value,"fullSync"),!ql.full_sync_strm_paths)throw new Error("请先配置全量同步路径");const e=await kl.api.post(`plugin/${Vl}/full_sync`);if(!e||0!==e.code)throw new Error(e?.msg||"启动全量同步失败");Bl.text=e.msg||"全量同步任务已启动",Bl.type="success"}catch(e){Bl.text=`启动全量同步失败: ${e.message||"未知错误"}`,Bl.type="error",console.error("启动全量同步失败:",e)}finally{Cl.value=!1}},Aa=async()=>{Tl.value=!0,Bl.text="";try{const e=await kl.api.post(`plugin/${Vl}/clear_id_path_cache`);if(!e||0!==e.code)throw new Error(e?.msg||"文件路径ID缓存清理失败");Bl.text=e.msg||"文件路径ID缓存清理成功",Bl.type="success"}catch(e){Bl.text=`文件路径ID缓存清理失败: ${e.message||"未知错误"}`,Bl.type="error",console.error("文件路径ID缓存清理失败:",e)}finally{Tl.value=!1,setTimeout(()=>{"success"!==Bl.type&&"error"!==Bl.type||(Bl.text="")},3e3)}},Da=async()=>{Sl.value=!0,Bl.text="";try{const e=await kl.api.post(`plugin/${Vl}/clear_increment_skip_cache`);if(!e||0!==e.code)throw new Error(e?.msg||"增量同步跳过路径缓存清理失败");Bl.text=e.msg||"增量同步跳过路径缓存清理成功",Bl.type="success"}catch(e){Bl.text=`增量同步跳过路径缓存清理失败: ${e.message||"未知错误"}`,Bl.type="error",console.error("增量同步跳过路径缓存清理失败:",e)}finally{Sl.value=!1,setTimeout(()=>{"success"!==Bl.type&&"error"!==Bl.type||(Bl.text="")},3e3)}},ja=e=>{switch(e){case"transfer":Zl.value.push({local:"",remote:""});break;case"mp":Ql.value.push({local:"",remote:""});break;case"fullSync":Xl.value.push({local:"",remote:"",enabled:!0});break;case"incrementSync":ea.value.push({local:"",remote:""});break;case"increment-mp":la.value.push({local:"",remote:""});break;case"monitorLife":aa.value.push({local:"",remote:""});break;case"monitorLifeMp":ta.value.push({local:"",remote:""});break;case"apiStrm":oa.value.push({local:"",remote:""});break;case"apiStrm-mp":na.value.push({local:"",remote:""});break;case"syncDelLibrary":pa.value.push({mediaserver:"",moviepilot:"",p115:""});break;case"directoryUpload":ma.value.push({src:"",dest_remote:"",dest_local:"",dest_strm:"",delete:!1});break;case"fuseStrmTakeover":_a.value.push({extensions:"",names:"",paths:"",_use_extensions:!1,_use_names:!1,_use_paths:!1})}},Ea=(e,l)=>{switch(l){case"transfer":Zl.value.splice(e,1),0===Zl.value.length&&(Zl.value=[{local:"",remote:""}]);break;case"mp":Ql.value.splice(e,1),0===Ql.value.length&&(Ql.value=[{local:"",remote:""}]);break;case"fullSync":Xl.value.splice(e,1),0===Xl.value.length&&(Xl.value=[{local:"",remote:"",enabled:!0}]);break;case"incrementSync":ea.value.splice(e,1),0===ea.value.length&&(ea.value=[{local:"",remote:""}]);break;case"increment-mp":la.value.splice(e,1),0===la.value.length&&(la.value=[{local:"",remote:""}]);break;case"monitorLife":aa.value.splice(e,1),0===aa.value.length&&(aa.value=[{local:"",remote:""}]);break;case"monitorLifeMp":ta.value.splice(e,1),0===ta.value.length&&(ta.value=[{local:"",remote:""}]);break;case"apiStrm":oa.value.splice(e,1),0===oa.value.length&&(oa.value=[{local:"",remote:""}]);break;case"apiStrm-mp":na.value.splice(e,1),0===na.value.length&&(na.value=[{local:"",remote:""}]);break;case"syncDelLibrary":pa.value.splice(e,1),0===pa.value.length&&(pa.value=[{mediaserver:"",moviepilot:"",p115:""}]);break;case"directoryUpload":ma.value.splice(e,1),0===ma.value.length&&(ma.value=[{src:"",dest_remote:"",dest_local:"",dest_strm:"",delete:!1}]);break;case"fuseStrmTakeover":_a.value.splice(e,1),0===_a.value.length&&(_a.value=[{extensions:"",names:"",paths:"",_use_extensions:!1,_use_names:!1,_use_paths:!1}])}},Na=()=>{sa.value.push({path:""})},qa=async()=>{if(Ca.path){Ca.loading=!0,Ca.result=null;try{const e=await kl.api.post(`plugin/${Vl}/manual_transfer`,{path:Ca.path});0===e.code?Ca.result={type:"success",title:"整理任务已启动",message:"整理任务已在后台启动，正在执行中。您可以在日志中查看详细进度。"}:Ca.result={type:"error",title:"启动失败",message:e.msg||"启动整理任务失败，请检查配置和网络连接。"}}catch(e){Ca.result={type:"error",title:"启动失败",message:`启动整理任务时发生错误：${e.message||e}`}}finally{Ca.loading=!1}}},Ba=()=>{Object.assign(Ca,{show:!1,path:"",loading:!1,result:null})},Ka=()=>{ia.value.push({path:""})},Ja=()=>{da.value.push({path:""})},Oa=()=>{ha.jsonText="",ha.error="",ha.show=!0},Fa=()=>{ha.show=!1},Ga=()=>{if(ha.error="",ha.jsonText&&ha.jsonText.trim())try{const e=JSON.parse(ha.jsonText);if(!Array.isArray(e))throw new Error("数据必须是一个数组。");if(!e.every(e=>"object"==typeof e&&null!==e&&"name"in e&&"id"in e))throw new Error("数组中的每个元素都必须是包含 'name' 和 'id' 键的对象。");ya.value=e.length>0?e:[{name:"",id:""}],Bl.text="频道配置导入成功！",Bl.type="success",Fa()}catch(e){ha.error=`导入失败: ${e.message}`,console.error("频道导入解析失败:",e)}else ha.error="输入内容不能为空。"},Wa=(e,l,a,t=null)=>{if(ga.show=!0,ga.isLocal="local"===l,ga.loading=!1,ga.error=null,ga.items=[],ga.index=e,ga.type=a,ga.fieldKey=t,ga.targetConfigKeyForExclusion=null,ga.originalPathTypeBackup="",ga.originalIndexBackup=-1,"syncDelLibrary"===a&&e>=0&&pa.value[e]&&t){const l=pa.value[e][t]||"/";ga.currentPath=l}else ga.currentPath="/";Ha()},Ha=async()=>{ga.loading=!0,ga.error=null,ga.items=[];try{if(ga.isLocal)try{const e=await kl.api.post("storage/list",{path:ga.currentPath||"/",type:"share",flag:"ROOT"});if(!e||!Array.isArray(e))throw new Error("浏览目录失败：无效响应");ga.items=e.filter(e=>"dir"===e.type).map(e=>({name:e.name,path:e.path,is_dir:!0})).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"}))}catch(e){console.error("浏览本地目录失败:",e),ga.error=`浏览本地目录失败: ${e.message||"未知错误"}`,ga.items=[]}else{if(!ql.cookies||""===ql.cookies.trim())throw new Error("请先设置115 Cookie才能浏览网盘目录");const e=await kl.api.get(`plugin/${Vl}/browse_dir?path=${encodeURIComponent(ga.currentPath)}&is_local=${ga.isLocal}`);if(!e||0!==e.code||!e.data)throw new Error(e?.msg||"获取网盘目录内容失败");ga.items=e.data.items.filter(e=>e.is_dir).sort((e,l)=>e.name.localeCompare(l.name,void 0,{numeric:!0,sensitivity:"base"})),ga.currentPath=e.data.path||ga.currentPath}}catch(e){console.error("加载目录内容失败:",e),ga.error=e.message||"获取目录内容失败",(e.message.includes("Cookie")||e.message.includes("cookie"))&&(ga.items=[])}finally{ga.loading=!1}},Ya=()=>{const e=ga.currentPath;if(!ga.isLocal){if("/"===e)return;let l=e.replace(/\\/g,"/");l.length>1&&l.endsWith("/")&&(l=l.slice(0,-1));const a=l.substring(0,l.lastIndexOf("/"));return ga.currentPath=""===a?"/":a,void Ha()}if("/"===e||"C:\\"===e||"C:/"===e)return;const l=e.replace(/\\/g,"/"),a=l.split("/").filter(Boolean);0===a.length?ga.currentPath="/":1===a.length&&l.includes(":")?ga.currentPath=a[0]+":/":(a.pop(),ga.currentPath=0===a.length?"/":(l.startsWith("/")?"/":"")+a.join("/")+"/"),Ha()},Za=()=>{if(!ga.currentPath)return;let e=ga.currentPath;if("/"===e||/^[a-zA-Z]:[\\\/]$/.test(e)||!e.endsWith("/")&&!e.endsWith("\\\\")||(e=e.slice(0,-1)),"excludePath"===ga.type&&ga.targetConfigKeyForExclusion){const l=ga.targetConfigKeyForExclusion;let a;"transfer_monitor_scrape_metadata_exclude_paths"===l?a=ra:"monitor_life_scrape_metadata_exclude_paths"===l?a=ua:"increment_sync_scrape_metadata_exclude_paths"===l&&(a=ca),a&&(1!==a.value.length||a.value[0].path?a.value.some(l=>l.path===e)?(Bl.text="该排除路径已存在。",Bl.type="warning",setTimeout(()=>{Bl.text=""},3e3)):a.value.push({path:e}):a.value[0]={path:e}),ga.type=ga.originalPathTypeBackup,ga.index=ga.originalIndexBackup,ga.targetConfigKeyForExclusion=null,ga.originalPathTypeBackup="",ga.originalIndexBackup=-1}else if(ga.index>=0&&"excludePath"!==ga.type)switch(ga.type){case"transfer":ga.isLocal?Zl.value[ga.index].local=e:Zl.value[ga.index].remote=e;break;case"fullSync":ga.isLocal?Xl.value[ga.index].local=e:Xl.value[ga.index].remote=e;break;case"incrementSync":ga.isLocal?ea.value[ga.index].local=e:ea.value[ga.index].remote=e;break;case"monitorLife":ga.isLocal?aa.value[ga.index].local=e:aa.value[ga.index].remote=e;break;case"apiStrm":ga.isLocal?oa.value[ga.index].local=e:oa.value[ga.index].remote=e;break;case"panTransfer":sa.value[ga.index].path=e;break;case"shareReceive":ia.value[ga.index].path=e;break;case"offlineDownload":da.value[ga.index].path=e;break;case"syncDelLibrary":ga.index>=0&&pa.value[ga.index]&&ga.fieldKey&&(pa.value[ga.index][ga.fieldKey]=e);break;case"directoryUpload":ga.fieldKey&&ma.value[ga.index]&&(ma.value[ga.index][ga.fieldKey]=e)}else"panTransferUnrecognized"===ga.type&&(ql.pan_transfer_unrecognized_path=e);Qa()},Qa=()=>{ga.show=!1,ga.items=[],ga.error=null},Xa=async()=>{if(!ql.cookies)return Bl.text="Cookie为空，无法复制。",void(Bl.type="warning");try{await navigator.clipboard.writeText(ql.cookies),Bl.text="Cookie已复制到剪贴板！",Bl.type="success"}catch(e){console.error("复制Cookie失败:",e),Bl.text="复制Cookie失败。请检查浏览器权限或确保通过HTTPS访问，或尝试手动复制。",Bl.type="error"}setTimeout(()=>{"success"!==Bl.type&&"warning"!==Bl.type&&"error"!==Bl.type||(Bl.text="")},3e3)},et=async()=>{if(!ql.aliyundrive_token)return Bl.text="Token为空，无法复制。",void(Bl.type="warning");try{await navigator.clipboard.writeText(ql.aliyundrive_token),Bl.text="阿里云盘Token已复制到剪贴板！",Bl.type="success"}catch(e){console.error("复制Token失败:",e),Bl.text="复制Token失败。请检查浏览器权限或手动复制。",Bl.type="error"}setTimeout(()=>{Bl.text=""},3e3)},lt=()=>{Va.show=!0,Va.loading=!1,Va.error=null,Va.qrcode="",Va.uid="",Va.time="",Va.sign="",ka.some(e=>e.value===Va.clientType)||(Va.clientType="alipaymini");const e=ka.find(e=>e.value===Va.clientType);Va.tips=e?`请使用${e.label}扫描二维码登录`:"请使用支付宝扫描二维码登录",Va.status="等待扫码",at()},at=async()=>{Va.loading=!0,Va.error=null,Va.qrcode="",Va.uid="",Va.time="",Va.sign="",console.warn(`【115STRM助手 DEBUG】准备获取二维码，前端选择的 clientType: ${Va.clientType}`);try{const e=await kl.api.get(`plugin/${Vl}/get_qrcode?client_type=${Va.clientType}`);e&&0===e.code&&e.data?(Va.uid=e.data.uid,Va.time=e.data.time,Va.sign=e.data.sign,Va.qrcode=e.data.qrcode,Va.tips=e.data.tips||"请扫描二维码登录",Va.status="等待扫码",e.data.client_type&&(Va.clientType=e.data.client_type),ot()):(Va.error=e?.msg||"获取二维码失败",console.error("【115STRM助手 DEBUG】获取二维码API调用失败或返回错误码: ",e))}catch(e){Va.error=`获取二维码出错: ${e.message||"未知错误"}`,console.error("【115STRM助手 DEBUG】获取二维码 JS 捕获异常:",e)}finally{Va.loading=!1}},tt=async()=>{if(Va.uid&&Va.show&&Va.time&&Va.sign)try{const e=await kl.api.get(`plugin/${Vl}/check_qrcode?uid=${Va.uid}&time=${Va.time}&sign=${Va.sign}&client_type=${Va.clientType}`);if(e&&0===e.code&&e.data){const l=e.data;"waiting"===l.status?Va.status="等待扫码":"scanned"===l.status?Va.status="已扫码，请在设备上确认":"success"===l.status&&(l.cookie?(ht(),Va.status="登录成功！",ql.cookies=l.cookie,Bl.text='登录成功！Cookie已获取，请点击下方"保存配置"按钮保存。',Bl.type="success",setTimeout(()=>{Va.show=!1},3e3)):(Va.status="登录似乎成功，但未获取到Cookie",Bl.text="登录成功但未获取到Cookie信息，请重试或检查账号。",Bl.type="warning",ht()))}else e&&"登录成功，正在处理..."!==Va.status&&(ht(),Va.error=e.msg||"二维码已失效，请刷新",Va.status="二维码已失效")}catch(e){"登录成功，正在处理..."!==Va.status&&console.error("检查二维码状态JS捕获异常:",e)}},ot=()=>{ht(),Va.checkIntervalId=setInterval(tt,3e3)},nt=()=>{wa.show=!0,wa.loading=!1,wa.error=null,wa.qrcode="",wa.t="",wa.ck="",wa.status="等待扫码",st()},st=async()=>{wa.loading=!0,wa.error=null,wa.qrcode="";try{const e=await kl.api.get(`plugin/${Vl}/get_aliyundrive_qrcode`);e&&0===e.code&&e.data?(wa.qrcode=e.data.qrcode,wa.t=e.data.t,wa.ck=e.data.ck,wa.status="等待扫码",dt()):wa.error=e?.msg||"获取阿里云盘二维码失败"}catch(e){wa.error=`获取二维码出错: ${e.message||"未知错误"}`}finally{wa.loading=!1}},it=async()=>{if(wa.t&&wa.ck&&wa.show)try{const e=await kl.api.get(`plugin/${Vl}/check_aliyundrive_qrcode?t=${wa.t}&ck=${encodeURIComponent(wa.ck)}`);e&&0===e.code&&e.data?"success"===e.data.status&&e.data.token?(rt(),wa.status="登录成功！",ql.aliyundrive_token=e.data.token,Bl.text="阿里云盘登录成功！Token已获取，请点击下方“保存配置”按钮。",Bl.type="success",setTimeout(()=>{wa.show=!1},2e3)):(wa.status=e.data.msg||"等待扫码","expired"!==e.data.status&&"invalid"!==e.data.status||(rt(),wa.error="二维码已失效，请刷新")):e&&(rt(),wa.status="二维码已失效",wa.error=e.msg||"二维码检查失败，请刷新。")}catch(e){console.error("检查阿里云盘二维码状态出错:",e)}},dt=()=>{rt(),wa.checkIntervalId=setInterval(it,2e3)},rt=()=>{wa.checkIntervalId&&(clearInterval(wa.checkIntervalId),wa.checkIntervalId=null)},ct=()=>{rt(),wa.error=null,st()},ut=()=>{rt(),wa.show=!1},mt=async()=>{za.show=!0,za.mountDir=ql.fuse_strm_mount_dir||"/emby/115",za.moviepilotAddress=ql.moviepilot_address||window.location.origin||"http://localhost:3000",za.generatedConfig="",await _t()},pt=()=>{za.show=!1},_t=async()=>{try{za.loading=!0;const e=za.mountDir||"/emby/115",l=za.moviepilotAddress||window.location.origin||"http://localhost:3000",a=await kl.api.get(`plugin/${Vl}/generate_emby2alist_config?mount_dir=${encodeURIComponent(e)}&moviepilot_address=${encodeURIComponent(l)}`);a&&0===a.code&&a.data?(za.generatedConfig=a.data.generated_config||"",a.data.mount_dir&&(za.mountDir=a.data.mount_dir),a.data.moviepilot_address&&(za.moviepilotAddress=a.data.moviepilot_address),Bl.text="配置生成成功！",Bl.type="success",setTimeout(()=>{"success"===Bl.type&&(Bl.text="")},3e3)):(Bl.text=a?.msg||"生成配置失败",Bl.type="error",setTimeout(()=>{"error"===Bl.type&&(Bl.text="")},3e3))}catch(e){console.error("生成配置失败:",e),Bl.text=`生成配置失败: ${e.message||"未知错误"}`,Bl.type="error",setTimeout(()=>{"error"===Bl.type&&(Bl.text="")},3e3)}finally{za.loading=!1}},ft=async()=>{try{await navigator.clipboard.writeText(za.generatedConfig),Bl.text="配置已复制到剪贴板！",Bl.type="success",setTimeout(()=>{"success"===Bl.type&&(Bl.text="")},3e3)}catch(e){Bl.text="复制失败，请手动复制",Bl.type="error",setTimeout(()=>{"error"===Bl.type&&(Bl.text="")},3e3)}},vt=async()=>{Ua.show=!0,Ua.loading=!0,Ua.error=null,Ua.result=null;try{const e=await kl.api.post(`plugin/${Vl}/check_life_event_status`);0===e.code?Ua.result=e:Ua.error=e.msg||"检查失败"}catch(e){Ua.error=e.message||"检查时发生错误"}finally{Ua.loading=!1}},yt=()=>{Ua.show=!1,Ua.error=null,Ua.result=null},bt=async()=>{if(Ua.result?.data?.debug_info)try{await navigator.clipboard.writeText(Ua.result.data.debug_info),Bl.text="调试信息已复制到剪贴板",Bl.type="success"}catch(e){Bl.text="复制失败，请手动选择文本复制",Bl.type="error"}},ht=()=>{Va.checkIntervalId&&(clearInterval(Va.checkIntervalId),Va.checkIntervalId=null)},gt=()=>{ht(),Va.error=null;const e=ka.find(e=>e.value===Va.clientType);Va.tips=e?`请使用${e.label}扫描二维码登录`:"请扫描二维码登录",at()},xt=()=>{ht(),Va.show=!1};hl(async()=>{a(),await(async()=>{try{Ul.value=!0;const l=await kl.api.get(`plugin/${Vl}/get_config`);if(l){Object.assign(ql,l),ma.value=Array.isArray(ql.directory_upload_path)&&ql.directory_upload_path.length>0?ql.directory_upload_path.map(e=>({src:e.src??"",dest_remote:e.dest_remote??"",dest_local:e.dest_local??"",dest_strm:e.dest_strm??"",delete:!!e.delete})):[{src:"",dest_remote:"",dest_local:"",dest_strm:"",delete:!1}];let a=[];if(ql.tg_search_channels)if(Array.isArray(ql.tg_search_channels))a=ql.tg_search_channels;else if("string"==typeof ql.tg_search_channels)try{a=JSON.parse(ql.tg_search_channels)}catch(e){console.error("解析旧的TG频道配置字符串失败:",e),a=[]}Array.isArray(a)&&a.length>0?ya.value=a:ya.value=[{name:"",id:""}],l.mediaservers&&(Ll.value=l.mediaservers),ql.fuse_strm_takeover_rules&&Array.isArray(ql.fuse_strm_takeover_rules)&&ql.fuse_strm_takeover_rules.length>0?_a.value=ql.fuse_strm_takeover_rules.map(e=>{const l=Array.isArray(e.extensions)?e.extensions:[],a=Array.isArray(e.names)?e.names:[],t=Array.isArray(e.paths)?e.paths:[];return{extensions:l.join("\n"),names:a.join("\n"),paths:t.join("\n"),_use_extensions:l.length>0,_use_names:a.length>0,_use_paths:t.length>0}}):_a.value=[{extensions:"",names:"",paths:"",_use_extensions:!1,_use_names:!1,_use_paths:!1}],null!==ql.sync_del_mediaservers&&void 0!==ql.sync_del_mediaservers||(ql.sync_del_mediaservers=[]);const t=new Set;ql.transfer_monitor_paths&&ql.transfer_monitor_paths.split("\n").map(e=>e.split("#")[0]?.trim()).filter(e=>e).forEach(e=>t.add(e)),ql.full_sync_strm_paths&&ql.full_sync_strm_paths.split("\n").map(e=>e.split("#")[0]?.trim()).filter(e=>e).forEach(e=>t.add(e)),ql.monitor_life_paths&&ql.monitor_life_paths.split("\n").map(e=>e.split("#")[0]?.trim()).filter(e=>e).forEach(e=>t.add(e)),Kl.value=ql.upload_module_skip_upload_wait_size>0?Yl(ql.upload_module_skip_upload_wait_size):"",Jl.value=ql.upload_module_force_upload_wait_size>0?Yl(ql.upload_module_force_upload_wait_size):"",Ol.value=ql.upload_module_skip_slow_upload_size>0?Yl(ql.upload_module_skip_slow_upload_size):"",Fl.value=ql.full_sync_min_file_size>0?Yl(ql.full_sync_min_file_size):"",Gl.value=ql.increment_sync_min_file_size>0?Yl(ql.increment_sync_min_file_size):"",Wl.value=ql.monitor_life_min_file_size>0?Yl(ql.monitor_life_min_file_size):""}}catch(l){console.error("加载配置失败:",l),Bl.text=`加载配置失败: ${l.message||"未知错误"}`,Bl.type="error"}finally{Ul.value=!1}})(),await(async()=>{try{const e=await kl.api.get(`plugin/${Vl}/check_feature?name=transfer_module_enhancement`);e&&!0===e.enabled?El.value=!1:(El.value=!0,ql.transfer_module_enhancement=!1)}catch(e){El.value=!0,ql.transfer_module_enhancement=!1,console.error('检查 "整理模块增强" 功能授权失败:',e)}})()}),gl(()=>{console.log("组件即将卸载，清理定时器..."),ht(),rt()}),xl(Nl,e=>{localStorage.setItem("p115strmhelper_basic_config_expanded",JSON.stringify(e))},{deep:!0}),xl(()=>Va.clientType,(e,l)=>{e!==l&&Va.show&&(console.log(`【115STRM助手 DEBUG】qrDialog.clientType 从 ${l} 变为 ${e}，准备刷新二维码`),gt())});const Vt=()=>{window&&window.location&&window.location.origin?(ql.moviepilot_address=window.location.origin,Bl.text="MoviePilot地址已设置为当前站点地址！",Bl.type="success"):(Bl.text="无法获取当前站点地址。",Bl.type="error"),setTimeout(()=>{"success"!==Bl.type&&"error"!==Bl.type||(Bl.text="")},3e3)},kt=e=>{ga.show=!0,ga.isLocal=!0,ga.loading=!1,ga.error=null,ga.items=[],ga.currentPath="/",ga.originalPathTypeBackup=ga.type,ga.originalIndexBackup=ga.index,ga.targetConfigKeyForExclusion=e,ga.type="excludePath",ga.index=-1,Ha()},wt=(e,l)=>{let a;"transfer_exclude"===l?a=ra:"life_exclude"===l?a=ua:"increment_exclude"===l&&(a=ca),a&&a.value&&e<a.value.length&&(a.value.splice(e,1),0===a.value.length&&(a.value=[{path:""}]))};return(e,l)=>{const a=t("v-icon"),vl=t("v-card-title"),yl=t("v-alert"),bl=t("v-skeleton-loader"),hl=t("v-expansion-panel-title"),gl=t("v-switch"),xl=t("v-col"),Vl=t("v-select"),kl=t("v-row"),Hl=t("v-text-field"),Yl=t("v-expansion-panel-text"),na=t("v-expansion-panel"),Ta=t("v-expansion-panels"),La=t("v-tab"),at=t("v-tabs"),tt=t("v-divider"),ot=t("v-btn"),st=t("v-card-text"),it=t("v-window-item"),dt=t("VCronField"),rt=t("v-tooltip"),ht=t("v-window"),Ut=t("v-card"),zt=t("v-spacer"),Ct=t("v-textarea"),Tt=t("v-expand-transition"),St=t("v-card-item"),Mt=t("v-combobox"),Rt=t("v-card-actions"),It=t("v-dialog"),Pt=t("v-progress-circular"),$t=t("v-list-item-title"),Lt=t("v-list-item-subtitle"),At=t("v-list-item"),Dt=t("v-list"),jt=t("v-chip"),Et=t("v-chip-group");return r(),_("div",y,[o(Ut,{flat:"",class:"rounded border config-main-card",style:{display:"flex","flex-direction":"column"}},{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-1 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-cog",class:"mr-2",color:"primary",size:"small"}),l[152]||(l[152]=n("span",null,"115网盘STRM助手配置",-1))]),_:1}),o(st,{class:"px-3 py-2",style:{"flex-grow":"1","overflow-y":"auto","padding-bottom":"56px"}},{default:s(()=>[Bl.text?(r(),c(yl,{key:0,type:Bl.type,density:"compact",class:"mb-2 text-caption",variant:"tonal",closable:""},{default:s(()=>[d(i(Bl.text),1)]),_:1},8,["type"])):u("",!0),Ul.value?(r(),c(bl,{key:1,type:"article, actions"})):(r(),_("div",b,[o(Ta,{modelValue:Nl.value,"onUpdate:modelValue":l[12]||(l[12]=e=>Nl.value=e),variant:"tonal",class:"mb-3",multiple:""},{default:s(()=>[o(na,{value:"basic-config",class:"rounded border config-card",eager:""},{default:s(()=>[o(hl,{class:"text-subtitle-2 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-cog",class:"mr-2",color:"primary",size:"small"}),l[153]||(l[153]=n("span",null,"基础设置",-1))]),_:1}),o(Yl,{class:"pa-3",eager:""},{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.enabled,"onUpdate:modelValue":l[0]||(l[0]=e=>ql.enabled=e),label:"启用插件",color:"success",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Vl,{modelValue:ql.strm_url_format,"onUpdate:modelValue":l[1]||(l[1]=e=>ql.strm_url_format=e),label:"STRM文件URL格式",items:[{title:"pickcode",value:"pickcode"},{title:"pickcode + name",value:"pickname"}],hint:ql.strm_url_template_enabled?"已启用自定义模板时优先使用模板，模板渲染失败时将使用此设置作为后备方案":"选择 STRM 文件的 URL 格式","persistent-hint":"",chips:"","closable-chips":""},null,8,["modelValue","hint"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Vl,{modelValue:ql.link_redirect_mode,"onUpdate:modelValue":l[2]||(l[2]=e=>ql.link_redirect_mode=e),label:"直链获取模式",items:[{title:"Cookie",value:"cookie"},{title:"OpenAPI",value:"open"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.notify,"onUpdate:modelValue":l[3]||(l[3]=e=>ql.notify=e),label:"发送通知",color:"success",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"8"},{default:s(()=>[o(Vl,{modelValue:ql.language,"onUpdate:modelValue":l[4]||(l[4]=e=>ql.language=e),label:"通知语言",items:[{title:"简体中文",value:"zh_CN"},{title:"繁中台湾",value:"zh_TW"},{title:"繁中港澳",value:"zh_HK"},{title:"柔情猫娘",value:"zh_CN_catgirl"},{title:"粤韵风华",value:"zh_yue"},{title:"咚咚搬砖",value:"zh_CN_dong"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:ql.cookies,"onUpdate:modelValue":l[6]||(l[6]=e=>ql.cookies=e),label:"115 Cookie",hint:"点击图标切换显隐、复制或扫码","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",type:Dl.value?"text":"password"},{"append-inner":s(()=>[o(a,{icon:Dl.value?"mdi-eye-off":"mdi-eye",onClick:l[5]||(l[5]=e=>Dl.value=!Dl.value),"aria-label":Dl.value?"隐藏Cookie":"显示Cookie",title:Dl.value?"隐藏Cookie":"显示Cookie",class:"mr-1",size:"small"},null,8,["icon","aria-label","title"]),o(a,{icon:"mdi-content-copy",onClick:Xa,disabled:!ql.cookies,"aria-label":"复制Cookie",title:"复制Cookie到剪贴板",size:"small",class:"mr-1"},null,8,["disabled"])]),append:s(()=>[o(a,{icon:"mdi-qrcode-scan",onClick:lt,color:ql.cookies?"success":"default","aria-label":ql.cookies?"更新/更换Cookie (重新扫码)":"扫码获取Cookie",title:ql.cookies?"更新/更换Cookie (重新扫码)":"扫码获取Cookie"},null,8,["color","aria-label","title"])]),_:1},8,["modelValue","type"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:ql.aliyundrive_token,"onUpdate:modelValue":l[8]||(l[8]=e=>ql.aliyundrive_token=e),label:"阿里云盘 Token (可选)",hint:"非必填。点击图标切换显隐、复制或扫码获取","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",type:jl.value?"text":"password"},{"append-inner":s(()=>[o(a,{icon:jl.value?"mdi-eye-off":"mdi-eye",onClick:l[7]||(l[7]=e=>jl.value=!jl.value),"aria-label":jl.value?"隐藏Token":"显示Token",title:jl.value?"隐藏Token":"显示Token",class:"mr-1",size:"small"},null,8,["icon","aria-label","title"]),o(a,{icon:"mdi-content-copy",onClick:et,disabled:!ql.aliyundrive_token,"aria-label":"复制Token",title:"复制Token到剪贴板",size:"small",class:"mr-1"},null,8,["disabled"])]),append:s(()=>[o(a,{icon:"mdi-qrcode-scan",onClick:nt,color:ql.aliyundrive_token?"success":"default","aria-label":ql.aliyundrive_token?"更新/更换Token":"扫码获取Token",title:ql.aliyundrive_token?"更新/更换Token":"扫码获取Token"},null,8,["color","aria-label","title"])]),_:1},8,["modelValue","type"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:ql.moviepilot_address,"onUpdate:modelValue":l[9]||(l[9]=e=>ql.moviepilot_address=e),label:"MoviePilot 内网访问地址",hint:"点右侧图标自动填充当前站点地址。","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},{append:s(()=>[o(a,{icon:"mdi-web",onClick:Vt,"aria-label":"使用当前站点地址",title:"使用当前站点地址",color:"info"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.user_rmt_mediaext,"onUpdate:modelValue":l[10]||(l[10]=e=>ql.user_rmt_mediaext=e),label:"可整理媒体文件扩展名",hint:"支持的媒体文件扩展名，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.user_download_mediaext,"onUpdate:modelValue":l[11]||(l[11]=e=>ql.user_download_mediaext=e),label:"可下载媒体数据文件扩展名",hint:"下载的字幕等附属文件扩展名，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Ut,{flat:"",class:"rounded mb-3 border config-card"},{default:s(()=>[o(at,{modelValue:Ml.value,"onUpdate:modelValue":l[13]||(l[13]=e=>Ml.value=e),color:"primary",class:"main-category-tabs",grow:""},{default:s(()=>[o(La,{value:"category-strm",class:"main-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[154]||(l[154]=[d("mdi-file-link")])),_:1}),l[155]||(l[155]=d("STRM同步 "))]),_:1}),o(La,{value:"category-pan",class:"main-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[156]||(l[156]=[d("mdi-cloud")])),_:1}),l[157]||(l[157]=d("网盘管理 "))]),_:1}),o(La,{value:"category-other",class:"main-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[158]||(l[158]=[d("mdi-puzzle")])),_:1}),l[159]||(l[159]=d("其他功能 "))]),_:1}),o(La,{value:"category-system",class:"main-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[160]||(l[160]=[d("mdi-cog")])),_:1}),l[161]||(l[161]=d("系统配置 "))]),_:1})]),_:1},8,["modelValue"]),o(tt),o(ht,{modelValue:Ml.value,"onUpdate:modelValue":l[131]||(l[131]=e=>Ml.value=e),touch:!1},{default:s(()=>[o(it,{value:"category-strm"},{default:s(()=>[o(st,{class:"pa-0"},{default:s(()=>[o(at,{modelValue:Rl.value,"onUpdate:modelValue":l[14]||(l[14]=e=>Rl.value=e),color:"primary",class:"sub-category-tabs","slider-color":"primary"},{default:s(()=>[o(La,{value:"tab-transfer",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[162]||(l[162]=[d("mdi-file-move-outline")])),_:1}),l[163]||(l[163]=d("监控MP整理 "))]),_:1}),o(La,{value:"tab-sync",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[164]||(l[164]=[d("mdi-sync")])),_:1}),l[165]||(l[165]=d("全量同步 "))]),_:1}),o(La,{value:"tab-increment-sync",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[166]||(l[166]=[d("mdi-book-sync")])),_:1}),l[167]||(l[167]=d("增量同步 "))]),_:1}),o(La,{value:"tab-life",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[168]||(l[168]=[d("mdi-calendar-heart")])),_:1}),l[169]||(l[169]=d("监控115生活事件 "))]),_:1}),o(La,{value:"tab-api-strm",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[170]||(l[170]=[d("mdi-api")])),_:1}),l[171]||(l[171]=d("API STRM生成 "))]),_:1})]),_:1},8,["modelValue"]),o(tt),o(ht,{modelValue:Rl.value,"onUpdate:modelValue":l[68]||(l[68]=e=>Rl.value=e),touch:!1},{default:s(()=>[o(it,{value:"tab-transfer"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.transfer_monitor_enabled,"onUpdate:modelValue":l[15]||(l[15]=e=>ql.transfer_monitor_enabled=e),label:"启用",color:"info"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.transfer_monitor_scrape_metadata_enabled,"onUpdate:modelValue":l[16]||(l[16]=e=>ql.transfer_monitor_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.transfer_monitor_media_server_refresh_enabled,"onUpdate:modelValue":l[17]||(l[17]=e=>ql.transfer_monitor_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Vl,{modelValue:ql.transfer_monitor_mediaservers,"onUpdate:modelValue":l[18]||(l[18]=e=>ql.transfer_monitor_mediaservers=e),label:"媒体服务器",items:Ll.value,multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1})]),_:1}),ql.transfer_monitor_scrape_metadata_enabled?(r(),c(kl,{key:0,class:"mt-2 mb-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",h,[(r(!0),_(p,null,m(ra.value,(e,t)=>(r(),_("div",{key:`transfer-exclude-${t}`,class:"mb-2 d-flex align-center"},[o(Hl,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"刮削排除目录",density:"compact",variant:"outlined",readonly:"","hide-details":"",class:"flex-grow-1 mr-2"},null,8,["modelValue","onUpdate:modelValue"]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>wt(t,"transfer_exclude"),disabled:!e.path},{default:s(()=>[o(a,null,{default:s(()=>l[172]||(l[172]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-folder-plus-outline",variant:"tonal",class:"mt-1 align-self-start",onClick:l[19]||(l[19]=e=>kt("transfer_monitor_scrape_metadata_exclude_paths"))},{default:s(()=>l[173]||(l[173]=[d(" 添加刮削排除目录 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[174]||(l[174]=[n("div",{class:"text-caption"},"此处添加的本地目录，在STRM文件生成后将不会自动触发刮削。",-1)])),_:1})]),_:1})]),_:1})):u("",!0),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",g,[(r(!0),_(p,null,m(Zl.value,(e,t)=>(r(),_("div",{key:`transfer-${t}`,class:"mb-2 d-flex align-center"},[n("div",x,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Wa(t,"local","transfer")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(a,null,{default:s(()=>l[175]||(l[175]=[d("mdi-pound")])),_:1}),n("div",V,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","transfer")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"transfer")},{default:s(()=>[o(a,null,{default:s(()=>l[176]||(l[176]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[20]||(l[20]=e=>ja("transfer"))},{default:s(()=>l[177]||(l[177]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[178]||(l[178]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption"},"监控MoviePilot整理入库事件，自动在本地对应目录生成STRM文件。",-1),n("div",{class:"text-body-2 mt-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"本地STRM目录："),d("本地STRM文件生成路径")]),n("div",null,[d("• "),n("strong",null,"网盘媒体库目录："),d("需要生成本地STRM文件的网盘媒体库路径")])],-1)])),_:1})]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",k,[(r(!0),_(p,null,m(Ql.value,(e,t)=>(r(),_("div",{key:`mp-${t}`,class:"mb-2 d-flex align-center"},[n("div",w,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"媒体库服务器映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),o(a,null,{default:s(()=>l[179]||(l[179]=[d("mdi-pound")])),_:1}),n("div",U,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"MP映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"mp")},{default:s(()=>[o(a,null,{default:s(()=>l[180]||(l[180]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[21]||(l[21]=e=>ja("mp"))},{default:s(()=>l[181]||(l[181]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[182]||(l[182]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 媒体服务器映射路径和MP映射路径不一样时请配置此项，如果不配置则无法正常刷新。"),n("div",null,"• 当映射路径一样时可省略此配置。")],-1)])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-sync"},{default:s(()=>[o(st,null,{default:s(()=>[n("div",z,[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Vl,{modelValue:ql.full_sync_overwrite_mode,"onUpdate:modelValue":l[22]||(l[22]=e=>ql.full_sync_overwrite_mode=e),label:"覆盖模式",items:[{title:"总是",value:"always"},{title:"从不",value:"never"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_remove_unless_strm,"onUpdate:modelValue":l[23]||(l[23]=e=>ql.full_sync_remove_unless_strm=e),label:"清理失效STRM文件",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_remove_unless_dir,"onUpdate:modelValue":l[24]||(l[24]=e=>ql.full_sync_remove_unless_dir=e),label:"清理无效STRM目录",color:"warning",disabled:!ql.full_sync_remove_unless_strm},null,8,["modelValue","disabled"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_remove_unless_file,"onUpdate:modelValue":l[25]||(l[25]=e=>ql.full_sync_remove_unless_file=e),label:"清理无效STRM文件关联的媒体信息文件",color:"warning",disabled:!ql.full_sync_remove_unless_strm},null,8,["modelValue","disabled"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.timing_full_sync_strm,"onUpdate:modelValue":l[26]||(l[26]=e=>ql.timing_full_sync_strm=e),label:"定期全量同步",color:"info"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(dt,{modelValue:ql.cron_full_sync_strm,"onUpdate:modelValue":l[27]||(l[27]=e=>ql.cron_full_sync_strm=e),label:"运行全量同步周期",hint:"设置全量同步的执行周期","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_auto_download_mediainfo_enabled,"onUpdate:modelValue":l[28]||(l[28]=e=>ql.full_sync_auto_download_mediainfo_enabled=e),label:"下载媒体数据文件",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Hl,{modelValue:Fl.value,"onUpdate:modelValue":l[29]||(l[29]=e=>Fl.value=e),label:"STRM最小文件大小",hint:"小于此值的文件将不生成STRM(单位K,M,G)","persistent-hint":"",density:"compact",placeholder:"例如: 100M (可为空)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_media_server_refresh_enabled,"onUpdate:modelValue":l[30]||(l[30]=e=>ql.full_sync_media_server_refresh_enabled=e),label:"全量同步后刷新媒体库",color:"error",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"8"},{default:s(()=>[o(Vl,{modelValue:ql.full_sync_mediaservers,"onUpdate:modelValue":l[31]||(l[31]=e=>ql.full_sync_mediaservers=e),label:"媒体服务器",items:Ll.value,multiple:"",chips:"","closable-chips":"",disabled:!ql.full_sync_media_server_refresh_enabled,hint:"全量同步完成后将刷新整个媒体库，请谨慎使用","persistent-hint":""},null,8,["modelValue","items","disabled"])]),_:1}),ql.full_sync_media_server_refresh_enabled?(r(),c(xl,{key:0,cols:"12"},{default:s(()=>[o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[183]||(l[183]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"重要警告")],-1),n("div",{class:"text-caption"}," 启用此功能后，全量同步完成后将自动刷新整个媒体库。此操作会扫描所有媒体文件，可能导致媒体服务器负载增加，请确保您已了解此风险并自行承担相应责任。 ",-1)])),_:1})]),_:1})):u("",!0)]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",C,[(r(!0),_(p,null,m(Xl.value,(e,t)=>(r(),_("div",{key:`full-${t}`,class:"mb-2 d-flex align-center gap-1"},[n("div",T,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Wa(t,"local","fullSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(a,{class:"shrink-0"},{default:s(()=>l[184]||(l[184]=[d("mdi-pound")])),_:1}),n("div",S,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","fullSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(rt,{text:e.enabled?"参与全量同步，点击关闭":"不参与全量同步，点击开启",location:"top"},{activator:s(({props:l})=>[o(ot,f({ref_for:!0},l,{icon:"",size:"small",color:e.enabled?"primary":"default",variant:"text",class:"shrink-0",onClick:l=>e.enabled=!e.enabled}),{default:s(()=>[o(a,null,{default:s(()=>[d(i(e.enabled?"mdi-sync":"mdi-sync-off"),1)]),_:2},1024)]),_:2},1040,["color","onClick"])]),_:2},1032,["text"]),o(ot,{icon:"",size:"small",color:"error",variant:"text",class:"shrink-0",onClick:e=>Ea(t,"fullSync")},{default:s(()=>[o(a,null,{default:s(()=>l[185]||(l[185]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[32]||(l[32]=e=>ja("fullSync"))},{default:s(()=>l[186]||(l[186]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[187]||(l[187]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption"},"全量扫描配置的网盘目录，并在对应的本地目录生成STRM文件。",-1),n("div",{class:"text-body-2 mt-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"同步："),d("开启时该目录参与全量同步，关闭则不参与（机器人命令按路径执行不受影响）")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"本地STRM目录："),d("本地STRM文件生成路径")]),n("div",null,[d("• "),n("strong",null,"网盘媒体库目录："),d("需要生成本地STRM文件的网盘媒体库路径")])],-1)])),_:1})]),_:1})]),_:1})]),o(Ta,{variant:"tonal",class:"mt-6"},{default:s(()=>[o(na,null,{default:s(()=>[o(hl,null,{default:s(()=>[o(a,{icon:"mdi-tune-variant",class:"mr-2"}),l[188]||(l[188]=d(" 高级配置 "))]),_:1}),o(Yl,{class:"pa-4"},{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_strm_log,"onUpdate:modelValue":l[33]||(l[33]=e=>ql.full_sync_strm_log=e),label:"输出STRM同步日志",color:"primary"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.full_sync_process_rust,"onUpdate:modelValue":l[34]||(l[34]=e=>ql.full_sync_process_rust=e),label:"Rust模式处理数据",color:"primary"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Vl,{modelValue:ql.full_sync_iter_function,"onUpdate:modelValue":l[35]||(l[35]=e=>ql.full_sync_iter_function=e),label:"迭代函数",items:[{title:"iter_files_with_path_skim",value:"iter_files_with_path_skim"},{title:"iter_files_with_path",value:"iter_files_with_path"}],chips:"","closable-chips":""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.full_sync_batch_num,"onUpdate:modelValue":l[36]||(l[36]=e=>ql.full_sync_batch_num=e),modelModifiers:{number:!0},label:"全量同步批处理数量",type:"number",hint:"每次批量处理的文件/目录数量","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.full_sync_process_num,"onUpdate:modelValue":l[37]||(l[37]=e=>ql.full_sync_process_num=e),modelModifiers:{number:!0},label:"全量同步生成进程数",type:"number",hint:"同时执行同步任务的进程数量","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.full_sync_remove_unless_max_threshold,"onUpdate:modelValue":l[38]||(l[38]=e=>ql.full_sync_remove_unless_max_threshold=e),modelModifiers:{number:!0},label:"清理无效 STRM 最大删除比例阈值 (%)",type:"number",hint:"当待删除文件数占本地文件总数的百分比超过此值时，将进入数据稳定性检查（默认 10%）","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.full_sync_remove_unless_stable_threshold,"onUpdate:modelValue":l[39]||(l[39]=e=>ql.full_sync_remove_unless_stable_threshold=e),modelModifiers:{number:!0},label:"清理数据稳定性检查阈值 (%)",type:"number",hint:"数据稳定性检查的变异系数阈值，低于此值表示删除数据稳定可执行操作（默认 5%）","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-increment-sync"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.increment_sync_strm_enabled,"onUpdate:modelValue":l[40]||(l[40]=e=>ql.increment_sync_strm_enabled=e),label:"启用",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(dt,{modelValue:ql.increment_sync_cron,"onUpdate:modelValue":l[41]||(l[41]=e=>ql.increment_sync_cron=e),label:"运行增量同步周期",hint:"设置增量同步的执行周期","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Hl,{modelValue:Gl.value,"onUpdate:modelValue":l[42]||(l[42]=e=>Gl.value=e),label:"STRM最小文件大小",hint:"小于此值的文件将不生成STRM(单位K,M,G)","persistent-hint":"",density:"compact",placeholder:"例如: 100M (可为空)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.increment_sync_auto_download_mediainfo_enabled,"onUpdate:modelValue":l[43]||(l[43]=e=>ql.increment_sync_auto_download_mediainfo_enabled=e),label:"下载媒体数据文件",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.increment_sync_scrape_metadata_enabled,"onUpdate:modelValue":l[44]||(l[44]=e=>ql.increment_sync_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.increment_sync_media_server_refresh_enabled,"onUpdate:modelValue":l[45]||(l[45]=e=>ql.increment_sync_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Vl,{modelValue:ql.increment_sync_mediaservers,"onUpdate:modelValue":l[46]||(l[46]=e=>ql.increment_sync_mediaservers=e),label:"媒体服务器",items:Ll.value,multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1})]),_:1}),ql.increment_sync_scrape_metadata_enabled?(r(),c(kl,{key:0,class:"mt-2 mb-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",M,[(r(!0),_(p,null,m(ca.value,(e,t)=>(r(),_("div",{key:`increment-exclude-${t}`,class:"mb-2 d-flex align-center"},[o(Hl,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"刮削排除目录",density:"compact",variant:"outlined",readonly:"","hide-details":"",class:"flex-grow-1 mr-2"},null,8,["modelValue","onUpdate:modelValue"]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>wt(t,"increment_exclude"),disabled:!e.path},{default:s(()=>[o(a,null,{default:s(()=>l[189]||(l[189]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-folder-plus-outline",variant:"tonal",class:"mt-1 align-self-start",onClick:l[47]||(l[47]=e=>kt("increment_sync_scrape_metadata_exclude_paths"))},{default:s(()=>l[190]||(l[190]=[d(" 添加刮削排除目录 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[191]||(l[191]=[n("div",{class:"text-caption"},"此处添加的本地目录，在STRM文件生成后将不会自动触发刮削。",-1)])),_:1})]),_:1})]),_:1})):u("",!0),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",R,[(r(!0),_(p,null,m(ea.value,(e,t)=>(r(),_("div",{key:`increment-${t}`,class:"mb-2 d-flex align-center"},[n("div",I,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Wa(t,"local","incrementSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(a,null,{default:s(()=>l[192]||(l[192]=[d("mdi-pound")])),_:1}),n("div",P,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","incrementSync")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"incrementSync")},{default:s(()=>[o(a,null,{default:s(()=>l[193]||(l[193]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[48]||(l[48]=e=>ja("incrementSync"))},{default:s(()=>l[194]||(l[194]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[195]||(l[195]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption"},"增量扫描配置的网盘目录，并在对应的本地目录生成STRM文件。",-1),n("div",{class:"text-body-2 mt-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"本地STRM目录："),d("本地STRM文件生成路径")]),n("div",null,[d("• "),n("strong",null,"网盘媒体库目录："),d("需要生成本地STRM文件的网盘媒体库路径")])],-1)])),_:1})]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",$,[(r(!0),_(p,null,m(la.value,(e,t)=>(r(),_("div",{key:`increment-mp-${t}`,class:"mb-2 d-flex align-center"},[n("div",L,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"媒体库服务器映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),o(a,null,{default:s(()=>l[196]||(l[196]=[d("mdi-pound")])),_:1}),n("div",A,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"MP映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"increment-mp")},{default:s(()=>[o(a,null,{default:s(()=>l[197]||(l[197]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[49]||(l[49]=e=>ja("increment-mp"))},{default:s(()=>l[198]||(l[198]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[199]||(l[199]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 媒体服务器映射路径和MP映射路径不一样时请配置此项，如果不配置则无法正常刷新。"),n("div",null,"• 当映射路径一样时可省略此配置。")],-1)])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-life"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.monitor_life_enabled,"onUpdate:modelValue":l[50]||(l[50]=e=>ql.monitor_life_enabled=e),label:"启用",color:"info"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Vl,{modelValue:ql.monitor_life_event_modes,"onUpdate:modelValue":l[51]||(l[51]=e=>ql.monitor_life_event_modes=e),label:"处理事件类型",items:[{title:"新增事件",value:"creata"},{title:"删除事件",value:"remove"},{title:"网盘整理",value:"transfer"}],multiple:"",chips:"","closable-chips":""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.monitor_life_remove_mp_history,"onUpdate:modelValue":l[52]||(l[52]=e=>ql.monitor_life_remove_mp_history=e),label:"同步删除历史记录",color:"warning",disabled:ql.monitor_life_remove_mp_source},null,8,["modelValue","disabled"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.monitor_life_remove_mp_source,"onUpdate:modelValue":l[53]||(l[53]=e=>ql.monitor_life_remove_mp_source=e),label:"同步删除源文件",color:"warning",onChange:l[54]||(l[54]=e=>{e&&(ql.monitor_life_remove_mp_history=!0)})},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.monitor_life_media_server_refresh_enabled,"onUpdate:modelValue":l[55]||(l[55]=e=>ql.monitor_life_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"8"},{default:s(()=>[o(Vl,{modelValue:ql.monitor_life_mediaservers,"onUpdate:modelValue":l[56]||(l[56]=e=>ql.monitor_life_mediaservers=e),label:"媒体服务器",items:Ll.value,multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.monitor_life_auto_download_mediainfo_enabled,"onUpdate:modelValue":l[57]||(l[57]=e=>ql.monitor_life_auto_download_mediainfo_enabled=e),label:"下载媒体数据文件",color:"warning"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.monitor_life_scrape_metadata_enabled,"onUpdate:modelValue":l[58]||(l[58]=e=>ql.monitor_life_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Hl,{modelValue:Wl.value,"onUpdate:modelValue":l[59]||(l[59]=e=>Wl.value=e),label:"STRM最小文件大小",hint:"小于此值的文件将不生成STRM(单位K,M,G)","persistent-hint":"",density:"compact",placeholder:"例如: 100M (可为空)",clearable:""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Hl,{modelValue:ql.monitor_life_event_wait_time,"onUpdate:modelValue":l[60]||(l[60]=e=>ql.monitor_life_event_wait_time=e),modelModifiers:{number:!0},label:"事件处理延迟时间",type:"number",hint:"接收到事件后等待的时间，0 则代表不等待 (单位秒)","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),ql.monitor_life_scrape_metadata_enabled?(r(),c(kl,{key:0,class:"mt-2 mb-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",D,[(r(!0),_(p,null,m(ua.value,(e,t)=>(r(),_("div",{key:`life-exclude-${t}`,class:"mb-2 d-flex align-center"},[o(Hl,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"刮削排除目录",density:"compact",variant:"outlined",readonly:"","hide-details":"",class:"flex-grow-1 mr-2"},null,8,["modelValue","onUpdate:modelValue"]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>wt(t,"life_exclude"),disabled:!e.path},{default:s(()=>[o(a,null,{default:s(()=>l[200]||(l[200]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-folder-plus-outline",variant:"tonal",class:"mt-1 align-self-start",onClick:l[61]||(l[61]=e=>kt("monitor_life_scrape_metadata_exclude_paths"))},{default:s(()=>l[201]||(l[201]=[d(" 添加刮削排除目录 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[202]||(l[202]=[n("div",{class:"text-caption"},"此处添加的本地目录，在115生活事件监控生成STRM后将不会自动触发刮削。",-1)])),_:1})]),_:1})]),_:1})):u("",!0),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",j,[(r(!0),_(p,null,m(aa.value,(e,t)=>(r(),_("div",{key:`life-${t}`,class:"mb-2 d-flex align-center"},[n("div",E,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Wa(t,"local","monitorLife")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(a,null,{default:s(()=>l[203]||(l[203]=[d("mdi-pound")])),_:1}),n("div",N,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","monitorLife")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"monitorLife")},{default:s(()=>[o(a,null,{default:s(()=>l[204]||(l[204]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[62]||(l[62]=e=>ja("monitorLife"))},{default:s(()=>l[205]||(l[205]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[206]||(l[206]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption"},"监控115生活（上传、移动、接收文件、删除、复制）事件，自动在本地对应目录生成STRM文件或者删除STRM文件。",-1),n("div",{class:"text-body-2 mt-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"本地STRM目录："),d("本地STRM文件生成路径")]),n("div",null,[d("• "),n("strong",null,"网盘媒体库目录："),d("需要生成本地STRM文件的网盘媒体库路径")])],-1)])),_:1})]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",q,[(r(!0),_(p,null,m(ta.value,(e,t)=>(r(),_("div",{key:`life-mp-${t}`,class:"mb-2 d-flex align-center"},[n("div",B,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"媒体库服务器映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),o(a,null,{default:s(()=>l[207]||(l[207]=[d("mdi-pound")])),_:1}),n("div",K,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"MP映射目录",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"monitorLifeMp")},{default:s(()=>[o(a,null,{default:s(()=>l[208]||(l[208]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[63]||(l[63]=e=>ja("monitorLifeMp"))},{default:s(()=>l[209]||(l[209]=[d(" 添加路径 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[210]||(l[210]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 媒体服务器映射路径和MP映射路径不一样时请配置此项，如果不配置则无法正常刷新。"),n("div",null,"• 当映射路径一样时可省略此配置。")],-1)])),_:1})]),_:1})]),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[211]||(l[211]=[n("div",{class:"text-caption"},"注意：当 MoviePilot 主程序运行整理任务时 115生活事件 监控会自动暂停，整理运行完成后会继续监控。",-1)])),_:1}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(ot,{color:"info",variant:"outlined","prepend-icon":"mdi-bug-check",onClick:vt},{default:s(()=>l[212]||(l[212]=[d(" 故障检查 ")])),_:1}),l[213]||(l[213]=n("div",{class:"text-caption text-grey mt-2"}," 检查115生活事件进程状态，测试数据拉取功能，并提供详细的调试信息 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-api-strm"},{default:s(()=>[o(st,null,{default:s(()=>[o(yl,{type:"info",variant:"tonal",density:"compact",class:"mb-4",icon:"mdi-information"},{default:s(()=>l[214]||(l[214]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption mb-2"},"API STRM 生成功能允许第三方开发者通过 HTTP API 调用，批量生成 STRM 文件。",-1),n("div",{class:"text-caption"},[d(" 详细 API 文档请参考： "),n("a",{href:"https://github.com/DDSRem-Dev/MoviePilot-Plugins/blob/main/docs/p115strmhelper/API_STRM生成功能文档.md",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit","text-decoration":"underline"}}," GitHub 文档链接 ")],-1)])),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.api_strm_scrape_metadata_enabled,"onUpdate:modelValue":l[64]||(l[64]=e=>ql.api_strm_scrape_metadata_enabled=e),label:"STRM自动刮削",color:"primary",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.api_strm_media_server_refresh_enabled,"onUpdate:modelValue":l[65]||(l[65]=e=>ql.api_strm_media_server_refresh_enabled=e),label:"媒体服务器刷新",color:"warning",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Vl,{modelValue:ql.api_strm_mediaservers,"onUpdate:modelValue":l[66]||(l[66]=e=>ql.api_strm_mediaservers=e),label:"媒体服务器",items:Ll.value,multiple:"",chips:"","closable-chips":"",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1}),o(tt,{class:"my-4"}),l[219]||(l[219]=n("div",{class:"text-subtitle-2 mb-2"},"路径映射配置:",-1)),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mb-3",icon:"mdi-information"},{default:s(()=>l[215]||(l[215]=[n("div",{class:"text-caption"},"配置网盘路径到本地路径的映射关系。当 API 请求中未指定 local_path 时，系统会根据此配置自动匹配路径。",-1)])),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",J,[(r(!0),_(p,null,m(oa.value,(e,t)=>(r(),_("div",{key:`api-strm-${t}`,class:"mb-2 d-flex align-center"},[n("div",O,[o(Hl,{modelValue:e.local,"onUpdate:modelValue":l=>e.local=l,label:"本地STRM目录",density:"compact","append-icon":"mdi-folder","onClick:append":e=>Wa(t,"local","apiStrm")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(a,null,{default:s(()=>l[216]||(l[216]=[d("mdi-pound")])),_:1}),n("div",F,[o(Hl,{modelValue:e.remote,"onUpdate:modelValue":l=>e.remote=l,label:"网盘媒体库目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","apiStrm")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>Ea(t,"apiStrm")},{default:s(()=>[o(a,null,{default:s(()=>l[217]||(l[217]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[67]||(l[67]=e=>ja("apiStrm"))},{default:s(()=>l[218]||(l[218]=[d(" 添加路径 ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(it,{value:"category-pan"},{default:s(()=>[o(st,{class:"pa-0"},{default:s(()=>[o(at,{modelValue:Il.value,"onUpdate:modelValue":l[69]||(l[69]=e=>Il.value=e),color:"primary",class:"sub-category-tabs","slider-color":"primary"},{default:s(()=>[o(La,{value:"tab-pan-transfer",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[220]||(l[220]=[d("mdi-transfer")])),_:1}),l[221]||(l[221]=d("网盘整理 "))]),_:1}),o(La,{value:"tab-pan-mount",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[222]||(l[222]=[d("mdi-folder-network")])),_:1}),l[223]||(l[223]=d("网盘挂载 "))]),_:1}),o(La,{value:"tab-directory-upload",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[224]||(l[224]=[d("mdi-upload")])),_:1}),l[225]||(l[225]=d("目录上传 "))]),_:1})]),_:1},8,["modelValue"]),o(tt),o(ht,{modelValue:Il.value,"onUpdate:modelValue":l[86]||(l[86]=e=>Il.value=e),touch:!1},{default:s(()=>[o(it,{value:"tab-pan-transfer"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.pan_transfer_enabled,"onUpdate:modelValue":l[70]||(l[70]=e=>ql.pan_transfer_enabled=e),label:"启用",color:"info"},null,8,["modelValue"])]),_:1})]),_:1}),o(Ut,{variant:"outlined",class:"mt-4"},{default:s(()=>[o(vl,{class:"text-subtitle-1"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[226]||(l[226]=[d("mdi-folder-move")])),_:1}),l[227]||(l[227]=d(" 待整理和未识别目录 "))]),_:1}),o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",G,[(r(!0),_(p,null,m(sa.value,(e,t)=>(r(),_("div",{key:`pan-${t}`,class:"mb-2 d-flex align-center"},[o(Hl,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"网盘待整理目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","panTransfer"),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","onClick:append"]),o(ot,{icon:"",size:"small",color:"primary",class:"ml-2",onClick:e=>(e=>{if(e<0||e>=sa.value.length)return Bl.text="路径项不存在",void(Bl.type="error");const l=sa.value[e];if(!l)return Bl.text="路径项不存在",void(Bl.type="error");const a=l.path;if(!a||"string"!=typeof a||!a.trim())return Bl.text="请先配置网盘路径",void(Bl.type="warning");Object.assign(Ca,{path:a.trim(),loading:!1,result:null,show:!0})})(t),disabled:!e.path,title:"手动整理此目录"},{default:s(()=>[o(a,null,{default:s(()=>l[228]||(l[228]=[d("mdi-play")])),_:1})]),_:2},1032,["onClick","disabled"]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>(e=>{sa.value.splice(e,1),0===sa.value.length&&(sa.value=[{path:""}])})(t)},{default:s(()=>[o(a,null,{default:s(()=>l[229]||(l[229]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:Na},{default:s(()=>l[230]||(l[230]=[d(" 添加路径 ")])),_:1})])]),_:1})]),_:1}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Hl,{modelValue:ql.pan_transfer_unrecognized_path,"onUpdate:modelValue":l[71]||(l[71]=e=>ql.pan_transfer_unrecognized_path=e),label:"网盘整理未识别目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":l[72]||(l[72]=e=>Wa("unrecognized","remote","panTransferUnrecognized"))},null,8,["modelValue"]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[231]||(l[231]=[n("div",{class:"text-caption"},"提示：此目录用于存放整理过程中未能识别的媒体文件。",-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[232]||(l[232]=[n("div",{class:"text-caption"},"注意：未识别目录不能设置在任何媒体库目录或待整理目录的内部。",-1)])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(Ut,{variant:"outlined",class:"mt-4"},{default:s(()=>[o(vl,{class:"text-subtitle-1"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[233]||(l[233]=[d("mdi-share-variant")])),_:1}),l[234]||(l[234]=d(" 分享转存目录 "))]),_:1}),o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",W,[(r(!0),_(p,null,m(ia.value,(e,t)=>(r(),_("div",{key:`share-${t}`,class:"mb-2 d-flex align-center"},[o(Hl,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"分享转存目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","shareReceive"),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","onClick:append"]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>(e=>{ia.value.splice(e,1),0===ia.value.length&&(ia.value=[{path:""}])})(t)},{default:s(()=>[o(a,null,{default:s(()=>l[235]||(l[235]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:Ka},{default:s(()=>l[236]||(l[236]=[d(" 添加路径 ")])),_:1})])]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[237]||(l[237]=[n("div",{class:"text-caption"},"提示：此目录用于存放通过分享链接转存的资源。",-1)])),_:1})]),_:1})]),_:1}),o(Ut,{variant:"outlined",class:"mt-4"},{default:s(()=>[o(vl,{class:"text-subtitle-1"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[238]||(l[238]=[d("mdi-download")])),_:1}),l[239]||(l[239]=d(" 离线下载目录 "))]),_:1}),o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",H,[(r(!0),_(p,null,m(da.value,(e,t)=>(r(),_("div",{key:`offline-${t}`,class:"mb-2 d-flex align-center"},[o(Hl,{modelValue:e.path,"onUpdate:modelValue":l=>e.path=l,label:"离线下载目录",density:"compact","append-icon":"mdi-folder-network","onClick:append":e=>Wa(t,"remote","offlineDownload"),class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","onClick:append"]),o(ot,{icon:"",size:"small",color:"error",class:"ml-2",onClick:e=>(e=>{da.value.splice(e,1),0===da.value.length&&(da.value=[{path:""}])})(t)},{default:s(()=>[o(a,null,{default:s(()=>l[240]||(l[240]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:Ja},{default:s(()=>l[241]||(l[241]=[d(" 添加路径 ")])),_:1})])]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[242]||(l[242]=[n("div",{class:"text-caption"},"提示：此目录用于存放通过离线下载功能下载的资源。",-1)])),_:1})]),_:1})]),_:1}),o(tt,{class:"my-4"}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[243]||(l[243]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"使用本功能需要先进入 设定-目录 进行配置："),n("div",{class:"mb-1"},"1. 添加目录配置卡，按需配置媒体类型和媒体类别，资源存储选择115网盘，资源目录输入网盘待整理文件夹"),n("div",{class:"mb-1"},"2. 自动整理模式选择手动整理，媒体库存储依旧选择115网盘，并配置好媒体库路径，整理方式选择移动，按需配置分类、重命名、通知"),n("div",null,"3. 配置完成目录设置后只需要在上方 网盘待整理目录 填入 网盘待整理文件夹 即可")],-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[244]||(l[244]=[n("div",{class:"text-caption"},"注意：配置目录时不能选择刮削元数据，否则可能导致风控！",-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[245]||(l[245]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"注意事项：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 阿里云盘，115网盘分享链接秒传或转存都依赖于网盘整理"),n("div",{class:"mb-1"},"• TG/Slack资源搜索转存也依赖于网盘整理"),n("div",null,"• 当阿里云盘分享秒传未能识别分享媒体信息时，会自动将资源转存到网盘整理未识别目录，后续需要用户手动重命名整理")],-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[246]||(l[246]=[n("div",{class:"text-caption"},"注意：115生活事件监控默认会忽略网盘整理触发的移动事件，所以推荐使用MP整理事件监控生成STRM",-1)])),_:1}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(ot,{color:"info",variant:"outlined","prepend-icon":"mdi-bug-check",onClick:vt},{default:s(()=>l[247]||(l[247]=[d(" 故障检查 ")])),_:1}),l[248]||(l[248]=n("div",{class:"text-caption text-grey mt-2"}," 检查115生活事件进程状态，测试数据拉取功能，并提供详细的调试信息 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-pan-mount"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(gl,{modelValue:ql.fuse_enabled,"onUpdate:modelValue":l[73]||(l[73]=e=>ql.fuse_enabled=e),label:"启用",color:"success",density:"compact",hint:"将115网盘挂载为本地文件系统","persistent-hint":""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.fuse_mountpoint,"onUpdate:modelValue":l[74]||(l[74]=e=>ql.fuse_mountpoint=e),label:"挂载点路径",hint:"文件系统挂载的本地路径","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",placeholder:"/mnt/115"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:ql.fuse_readdir_ttl,"onUpdate:modelValue":l[75]||(l[75]=e=>ql.fuse_readdir_ttl=e),modelModifiers:{number:!0},label:"目录读取缓存 TTL（秒）",type:"number",hint:"目录列表缓存时间，默认60秒","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",min:"0"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:ql.fuse_uid,"onUpdate:modelValue":l[76]||(l[76]=e=>ql.fuse_uid=e),modelModifiers:{number:!0},label:"文件所有者 UID",type:"number",hint:"挂载文件的用户ID，留空则使用当前运行用户","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",min:"0",clearable:""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:ql.fuse_gid,"onUpdate:modelValue":l[77]||(l[77]=e=>ql.fuse_gid=e),modelModifiers:{number:!0},label:"文件所有者 GID",type:"number",hint:"挂载文件的组ID，留空则使用当前运行用户","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",min:"0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(tt,{class:"my-4"}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(gl,{modelValue:ql.fuse_strm_takeover_enabled,"onUpdate:modelValue":l[78]||(l[78]=e=>ql.fuse_strm_takeover_enabled=e),label:"接管 STRM 文件生成内容",color:"primary",density:"compact",hint:"启用后，匹配规则的文件将生成指向挂载路径的 STRM 内容","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),o(Tt,null,{default:s(()=>[ql.fuse_strm_takeover_enabled?(r(),_("div",Y,[o(tt,{class:"my-4"}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mb-4",icon:"mdi-information"},{default:s(()=>l[249]||(l[249]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"STRM URL 生成优先级：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("1. "),n("strong",null,"URL 自定义模板"),d("（如果启用）：优先使用 Jinja2 模板渲染")]),n("div",{class:"mb-1"},[d("2. "),n("strong",null,"FUSE STRM 接管"),d("（如果启用且匹配规则）：生成指向挂载路径的 STRM 内容")]),n("div",null,[d("3. "),n("strong",null,"默认格式"),d("：使用基础设置中的「STRM文件URL格式」和「STRM URL 文件名称编码」")])],-1)])),_:1}),o(tt,{class:"mb-4"}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.fuse_strm_mount_dir,"onUpdate:modelValue":l[79]||(l[79]=e=>ql.fuse_strm_mount_dir=e),label:"媒体服务器网盘挂载目录",hint:"媒体服务器中配置的 115 网盘挂载路径","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto",placeholder:"/media/115"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(ot,{color:"primary",variant:"outlined","prepend-icon":"mdi-code-tags",size:"small",onClick:mt},{default:s(()=>l[250]||(l[250]=[d(" 生成 emby2Alist 配置 ")])),_:1})]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[l[259]||(l[259]=n("div",{class:"text-body-2 mb-2"},[n("strong",null,"接管规则：")],-1)),n("div",Z,[(r(!0),_(p,null,m(_a.value,(e,t)=>(r(),c(Ut,{key:`fuse-strm-takeover-${t}`,variant:"outlined",class:"mb-3"},{default:s(()=>[o(st,null,{default:s(()=>[n("div",Q,[n("span",X,"规则 #"+i(t+1),1),o(zt),o(ot,{icon:"",size:"small",color:"error",onClick:e=>Ea(t,"fuseStrmTakeover")},{default:s(()=>[o(a,null,{default:s(()=>l[251]||(l[251]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),n("div",ee,[l[252]||(l[252]=n("div",{class:"text-caption text-medium-emphasis mb-2"},"选择匹配方式（可多选）：",-1)),n("div",le,[o(gl,{modelValue:e._use_extensions,"onUpdate:modelValue":l=>e._use_extensions=l,label:"文件后缀",density:"compact",color:"primary","hide-details":"",class:"ma-0"},null,8,["modelValue","onUpdate:modelValue"]),o(gl,{modelValue:e._use_names,"onUpdate:modelValue":l=>e._use_names=l,label:"文件名称",density:"compact",color:"primary","hide-details":"",class:"ma-0"},null,8,["modelValue","onUpdate:modelValue"]),o(gl,{modelValue:e._use_paths,"onUpdate:modelValue":l=>e._use_paths=l,label:"网盘路径",density:"compact",color:"primary","hide-details":"",class:"ma-0"},null,8,["modelValue","onUpdate:modelValue"])])]),o(Tt,null,{default:s(()=>[e._use_extensions?(r(),_("div",ae,[o(Ct,{modelValue:e.extensions,"onUpdate:modelValue":l=>e.extensions=l,label:"文件后缀（每行一个，例如：mkv、mp4）",hint:"匹配的文件后缀，不包含点号，每行一个","persistent-hint":"",density:"compact",variant:"outlined",rows:"2",class:"mb-2",placeholder:"mkv\nmp4\navi"},null,8,["modelValue","onUpdate:modelValue"])])):u("",!0)]),_:2},1024),o(Tt,null,{default:s(()=>[e._use_names?(r(),_("div",te,[o(Ct,{modelValue:e.names,"onUpdate:modelValue":l=>e.names=l,label:"文件名称白名单（每行一个，支持部分匹配）",hint:"文件名包含这些关键词时匹配，每行一个","persistent-hint":"",density:"compact",variant:"outlined",rows:"2",class:"mb-2",placeholder:"蓝光\nBluRay"},null,8,["modelValue","onUpdate:modelValue"])])):u("",!0)]),_:2},1024),o(Tt,null,{default:s(()=>[e._use_paths?(r(),_("div",oe,[o(Ct,{modelValue:e.paths,"onUpdate:modelValue":l=>e.paths=l,label:"网盘文件夹路径（每行一个，支持部分匹配）",hint:"文件路径包含这些路径时匹配，每行一个","persistent-hint":"",density:"compact",variant:"outlined",rows:"2",placeholder:"/电影/4K\n/电视剧"},null,8,["modelValue","onUpdate:modelValue"])])):u("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"align-self-start",onClick:l[80]||(l[80]=e=>ja("fuseStrmTakeover"))},{default:s(()=>l[253]||(l[253]=[d(" 添加接管规则 ")])),_:1})]),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>[n("div",ne,[l[255]||(l[255]=n("div",{class:"mb-1"},[d("• 三种匹配方式可以组合使用，"),n("strong",null,"同时满足"),d("（与关系）才会匹配")],-1)),l[256]||(l[256]=n("div",{class:"mb-1"},[d("• 如果某个匹配条件为空，则"),n("strong",null,"不检查"),d("该条件")],-1)),l[257]||(l[257]=n("div",{class:"mb-1"},[d("• "),n("strong",null,"匹配成功后生成的 STRM 内容：")],-1)),n("div",se,[l[254]||(l[254]=d(" 格式：")),n("code",null,i(ql.fuse_strm_mount_dir||"媒体服务器挂载目录")+"/文件网盘路径",1)]),l[258]||(l[258]=n("div",null,[d(" 示例：如果挂载目录为 "),n("code",null,"/media/115"),d("，文件网盘路径为 "),n("code",null,"/电影/示例.mkv"),d("，则生成的 STRM 内容为 "),n("code",null,"/media/115/电影/示例.mkv")],-1))])]),_:1})]),_:1})]),_:1})])):u("",!0)]),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[260]||(l[260]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"平台限制说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"Windows 系统不支持："),d("FUSE 功能基于 Linux 文件系统，无法在 Windows 环境下运行 ")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"Linux 裸机："),d("理论上支持，需要安装 libfuse（libfuse2 或 libfuse3）")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"macOS 裸机："),d("理论上支持，需要安装 macFUSE")]),n("div",null,[d("• "),n("strong",null,"推荐使用 Docker 容器："),d("目前仅对 Docker 容器环境有较好的支持和测试，建议在 Docker 容器中使用此功能")])],-1)])),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[261]||(l[261]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption mb-2"},'启用后，115网盘将挂载为容器内的文件系统，可通过文件管理器直接访问。配合上方的"STRM 文件生成内容接管"功能，可以让生成的 STRM 文件直接指向挂载路径，实现本地文件系统访问。',-1),n("div",{class:"text-body-2 mt-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"挂载点路径："),d("容器内的挂载路径，必须是已存在的目录（例如："),n("code",null,"/media/115"),d(" 或 "),n("code",null,"/data/115"),d("） ")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"目录读取缓存 TTL："),d("目录列表缓存时间，默认60秒")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"文件所有者 UID/GID："),d("设置挂载文件的用户和组ID，留空则自动使用当前运行用户（Docker 容器中建议设置为非 root 用户） ")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"容器权限："),d("需要容器以 "),n("code",null,"--privileged"),d(" 或 "),n("code",null,"--cap-add SYS_ADMIN"),d(" 权限运行 ")]),n("div",null,[d("• "),n("strong",null,"STRM 接管："),d('启用上方的"接管 STRM 文件生成内容"后，匹配规则的文件将生成指向挂载路径的 STRM 内容，媒体服务器可直接通过挂载路径访问文件')])],-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[262]||(l[262]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"重要提示：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"切勿直接使用媒体服务器刮削挂载路径"),d("，这会导致网盘风控")]),n("div",null,[d("• "),n("strong",null,"正确方法："),d("使用本插件的 STRM 文件生成功能，在本地生成 STRM 文件后，再让媒体服务器对 STRM 文件进行刮削")])],-1)])),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-book-open-page-variant"},{default:s(()=>l[263]||(l[263]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"配置教程：")],-1),n("div",{class:"text-caption"},[d(" 详细的 FUSE 挂载配置指南请参考： "),n("a",{href:"https://blog.ddsrem.com/archives/115strmhelper-fuse-use",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit","text-decoration":"underline"}},"FUSE 挂载详细配置指南")],-1)])),_:1})]),_:1})]),_:1}),o(it,{value:"tab-directory-upload"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.directory_upload_enabled,"onUpdate:modelValue":l[81]||(l[81]=e=>ql.directory_upload_enabled=e),label:"启用",color:"info",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"8"},{default:s(()=>[o(Vl,{modelValue:ql.directory_upload_mode,"onUpdate:modelValue":l[82]||(l[82]=e=>ql.directory_upload_mode=e),label:"监控模式",items:[{title:"兼容模式",value:"compatibility"},{title:"性能模式",value:"fast"}],chips:"","closable-chips":"",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.directory_upload_uploadext,"onUpdate:modelValue":l[83]||(l[83]=e=>ql.directory_upload_uploadext=e),label:"上传文件扩展名",hint:"指定哪些扩展名的文件会被上传到115网盘，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.directory_upload_copyext,"onUpdate:modelValue":l[84]||(l[84]=e=>ql.directory_upload_copyext=e),label:"复制文件扩展名",hint:"指定哪些扩展名的文件会被复制到本地目标目录，多个用逗号分隔","persistent-hint":"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1}),o(tt,{class:"my-3"}),l[270]||(l[270]=n("div",{class:"text-subtitle-2 mb-2"},"路径配置:",-1)),(r(!0),_(p,null,m(ma.value,(e,t)=>(r(),_("div",{key:`upload-${t}`,class:"path-group mb-3 pa-2 border rounded"},[o(kl,{dense:""},{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:e.src,"onUpdate:modelValue":l=>e.src=l,label:"本地监控目录",density:"compact",variant:"outlined","hide-details":"","append-icon":"mdi-folder-search-outline","onClick:append":e=>Wa(t,"local","directoryUpload","src")},{"prepend-inner":s(()=>[o(a,{color:"blue"},{default:s(()=>l[264]||(l[264]=[d("mdi-folder-table")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:e.dest_remote,"onUpdate:modelValue":l=>e.dest_remote=l,label:"网盘上传目标目录",density:"compact",variant:"outlined","hide-details":"","append-icon":"mdi-folder-network-outline","onClick:append":e=>Wa(t,"remote","directoryUpload","dest_remote")},{"prepend-inner":s(()=>[o(a,{color:"green"},{default:s(()=>l[265]||(l[265]=[d("mdi-cloud-upload")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024)]),_:2},1024),o(kl,{dense:"",class:"mt-1"},{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:e.dest_local,"onUpdate:modelValue":l=>e.dest_local=l,label:"本地复制目标目录 (可选)",density:"compact",variant:"outlined","hide-details":"","append-icon":"mdi-folder-plus-outline","onClick:append":e=>Wa(t,"local","directoryUpload","dest_local")},{"prepend-inner":s(()=>[o(a,{color:"orange"},{default:s(()=>l[266]||(l[266]=[d("mdi-content-copy")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:e.dest_strm,"onUpdate:modelValue":l=>e.dest_strm=l,label:"STRM 输出目录 (可选)",density:"compact",variant:"outlined","append-icon":"mdi-file-document-outline","hide-details":"auto","onClick:append":e=>Wa(t,"local","directoryUpload","dest_strm")},{"prepend-inner":s(()=>[o(a,{color:"purple"},{default:s(()=>l[267]||(l[267]=[d("mdi-file-star")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024)]),_:2},1024),o(kl,{dense:"",class:"mt-1"},{default:s(()=>[o(xl,{cols:"12",md:"10",class:"d-flex align-center"},{default:s(()=>[o(gl,{modelValue:e.delete,"onUpdate:modelValue":l=>e.delete=l,label:"处理后删除源文件",color:"error",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(xl,{cols:"12",md:"2",class:"d-flex align-center justify-end"},{default:s(()=>[o(ot,{icon:"mdi-delete-outline",size:"small",color:"error",variant:"text",title:"删除此路径配置",onClick:e=>Ea(t,"directoryUpload")},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus-box-multiple-outline",variant:"tonal",class:"mt-2",color:"primary",onClick:l[85]||(l[85]=e=>ja("directoryUpload"))},{default:s(()=>l[268]||(l[268]=[d(" 添加监控路径组 ")])),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[269]||(l[269]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},'• 监控指定的"本地监控目录"'),n("div",{class:"mb-1"},"• 当目录中出现新文件时："),n("div",{class:"ml-4 mb-1"},'- 如果文件扩展名匹配"上传文件扩展名"，则将其上传到对应的"网盘上传目标目录"；若配置了"STRM 输出目录"，上传成功后会立即在该目录生成对应 .strm 文件 '),n("div",{class:"ml-4 mb-1"},'- 如果文件扩展名匹配"复制文件扩展名"，则将其复制到对应的"本地复制目标目录"'),n("div",{class:"mb-1"},'• 处理完成后，如果"删除源文件"开关打开，则会删除原始文件'),n("div",{class:"mb-1"},"• 扩展名不匹配的文件将被忽略"),n("div",{class:"mb-1"},'• "STRM 输出目录"：上传成功后立即在此目录生成对应 .strm 文件，目录结构同监控目录相对路径')],-1),n("strong",null,"注意:",-1),n("br",null,null,-1),d(" - 请确保MoviePilot对本地目录有读写权限，对网盘目录有写入权限。"),n("br",null,null,-1),d(' - "本地复制目标目录"和"STRM 输出目录"是可选的，如果不填，则仅执行上传操作（如果匹配）。'),n("br",null,null,-1),d(' - 监控模式："性能模式"使用系统原生文件系统事件，适用于物理路径，性能高且更稳定；"兼容模式"使用轮询方式，适用于网络共享目录（如SMB/NFS），性能较低但兼容性好。 ')])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(it,{value:"category-other"},{default:s(()=>[o(st,{class:"pa-0"},{default:s(()=>[o(at,{modelValue:Pl.value,"onUpdate:modelValue":l[87]||(l[87]=e=>Pl.value=e),color:"primary",class:"sub-category-tabs","slider-color":"primary"},{default:s(()=>[o(La,{value:"tab-sync-del",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[271]||(l[271]=[d("mdi-delete-sweep")])),_:1}),l[272]||(l[272]=d("同步删除 "))]),_:1}),o(La,{value:"tab-tg-search",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[273]||(l[273]=[d("mdi-tab-search")])),_:1}),l[274]||(l[274]=d("频道搜索 "))]),_:1}),o(La,{value:"tab-cleanup",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[275]||(l[275]=[d("mdi-broom")])),_:1}),l[276]||(l[276]=d("定期清理 "))]),_:1}),o(La,{value:"tab-same-playback",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[277]||(l[277]=[d("mdi:code-block-parentheses")])),_:1}),l[278]||(l[278]=d("多端播放 "))]),_:1})]),_:1},8,["modelValue"]),o(tt),o(ht,{modelValue:Pl.value,"onUpdate:modelValue":l[102]||(l[102]=e=>Pl.value=e),touch:!1},{default:s(()=>[o(it,{value:"tab-sync-del"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.sync_del_enabled,"onUpdate:modelValue":l[88]||(l[88]=e=>ql.sync_del_enabled=e),label:"启用同步删除",color:"warning",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.sync_del_notify,"onUpdate:modelValue":l[89]||(l[89]=e=>ql.sync_del_notify=e),label:"发送通知",color:"success",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.sync_del_source,"onUpdate:modelValue":l[90]||(l[90]=e=>ql.sync_del_source=e),label:"删除源文件",color:"error",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.sync_del_p115_force_delete_files,"onUpdate:modelValue":l[91]||(l[91]=e=>ql.sync_del_p115_force_delete_files=e),label:"强制删除文件",color:"warning",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(gl,{modelValue:ql.sync_del_remove_versions,"onUpdate:modelValue":l[92]||(l[92]=e=>ql.sync_del_remove_versions=e),label:"开启多版本删除",color:"info",density:"compact",chips:"","closable-chips":"",hint:"请查看下方警告提示了解详细说明","persistent-hint":""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Vl,{modelValue:ql.sync_del_mediaservers,"onUpdate:modelValue":l[93]||(l[93]=e=>ql.sync_del_mediaservers=e),label:"媒体服务器",items:Al.value,multiple:"",density:"compact",chips:"","closable-chips":"",hint:"用于获取TMDB ID，仅支持Emby","persistent-hint":""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[n("div",ie,[(r(!0),_(p,null,m(pa.value,(e,t)=>(r(),_("div",{key:`sync-del-${t}`,class:"mb-3 pa-3 border rounded"},[o(kl,{dense:""},{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:e.mediaserver,"onUpdate:modelValue":l=>e.mediaserver=l,label:"媒体服务器STRM路径",density:"compact",variant:"outlined",hint:"例如：/media/strm","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:e.moviepilot,"onUpdate:modelValue":l=>e.moviepilot=l,label:"MoviePilot路径",density:"compact",variant:"outlined",hint:"例如：/mnt/strm","persistent-hint":"","append-icon":"mdi-folder-home","onClick:append":e=>Wa(t,"local","syncDelLibrary","moviepilot")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Hl,{modelValue:e.p115,"onUpdate:modelValue":l=>e.p115=l,label:"115网盘媒体库路径",density:"compact",variant:"outlined",hint:"例如：/影视","persistent-hint":"","append-icon":"mdi-cloud","onClick:append":e=>Wa(t,"remote","syncDelLibrary","p115")},null,8,["modelValue","onUpdate:modelValue","onClick:append"])]),_:2},1024)]),_:2},1024),o(kl,{dense:""},{default:s(()=>[o(xl,{cols:"12",class:"d-flex justify-end"},{default:s(()=>[o(ot,{icon:"",size:"small",color:"error",onClick:e=>Ea(t,"syncDelLibrary")},{default:s(()=>[o(a,null,{default:s(()=>l[279]||(l[279]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),o(ot,{size:"small","prepend-icon":"mdi-plus",variant:"outlined",class:"mt-2 align-self-start",onClick:l[94]||(l[94]=e=>ja("syncDelLibrary"))},{default:s(()=>l[280]||(l[280]=[d(" 添加路径映射 ")])),_:1})])]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[281]||(l[281]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"关于路径映射：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"媒体服务器STRM路径："),d("媒体服务器中STRM文件的实际路径")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"MoviePilot路径："),d("MoviePilot中对应的路径")]),n("div",null,[d("• "),n("strong",null,"115网盘媒体库路径："),d("115网盘中媒体库的路径")])],-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[282]||(l[282]=[n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 不正确配置会导致查询不到转移记录！"),n("div",{class:"mb-1"},"• 需要使用神医助手PRO且版本在v3.0.0.3及以上或神医助手社区版且版本在v2.0.0.27及以上！"),n("div",{class:"mb-1"},"• 同步删除多版本功能需要使用助手Pro v3.0.0.22才支持！"),n("div",null,[d("• "),n("strong",null,"开启多版本删除："),d("开启后会将电影和电视剧季删除通过神医返回的路径改为电影单部/电视剧单集删除，从而防止误删其它版本，如果无多版本电影和电视剧季删除的需求，推荐关闭此按钮，提升删除效率 ")])],-1)])),_:1})]),_:1})]),_:1}),o(it,{value:"tab-tg-search"},{default:s(()=>[o(st,null,{default:s(()=>[o(Ut,{variant:"outlined",class:"mb-6"},{default:s(()=>[o(St,null,{default:s(()=>[o(vl,{class:"d-flex align-center"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[283]||(l[283]=[d("mdi-cog-outline")])),_:1}),l[284]||(l[284]=n("span",{class:"text-h6"},"Nullbr 搜索配置",-1))]),_:1})]),_:1}),o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.nullbr_app_id,"onUpdate:modelValue":l[95]||(l[95]=e=>ql.nullbr_app_id=e),label:"Nullbr APP ID",hint:"从 Nullbr 官网申请","persistent-hint":"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.nullbr_api_key,"onUpdate:modelValue":l[96]||(l[96]=e=>ql.nullbr_api_key=e),label:"Nullbr API KEY",hint:"从 Nullbr 官网申请","persistent-hint":"",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(Ut,{variant:"outlined"},{default:s(()=>[o(St,null,{default:s(()=>[o(vl,{class:"d-flex align-center"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[285]||(l[285]=[d("mdi-telegram")])),_:1}),l[286]||(l[286]=n("span",{class:"text-h6"},"自定义Telegram频道",-1))]),_:1})]),_:1}),o(st,null,{default:s(()=>[(r(!0),_(p,null,m(ya.value,(e,t)=>(r(),_("div",{key:t,class:"d-flex align-center mb-4"},[o(Hl,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,label:"频道名称",placeholder:"例如：爱影115资源分享频道",density:"compact",variant:"outlined","hide-details":"",class:"mr-3"},null,8,["modelValue","onUpdate:modelValue"]),o(Hl,{modelValue:e.id,"onUpdate:modelValue":l=>e.id=l,label:"频道ID",placeholder:"例如：ayzgzf",density:"compact",variant:"outlined","hide-details":"",class:"mr-3"},null,8,["modelValue","onUpdate:modelValue"]),o(ot,{icon:"",size:"small",color:"error",variant:"tonal",onClick:e=>(e=>{ya.value.splice(e,1),0===ya.value.length&&ya.value.push({name:"",id:""})})(t),title:"删除此频道"},{default:s(()=>[o(a,null,{default:s(()=>l[287]||(l[287]=[d("mdi-delete-outline")])),_:1})]),_:2},1032,["onClick"])]))),128)),n("div",de,[o(ot,{size:"small","prepend-icon":"mdi-plus-circle-outline",variant:"tonal",color:"primary",onClick:ba},{default:s(()=>l[288]||(l[288]=[d(" 添加频道 ")])),_:1}),o(ot,{size:"small","prepend-icon":"mdi-import",variant:"tonal",onClick:Oa},{default:s(()=>l[289]||(l[289]=[d(" 一键导入 ")])),_:1})])]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-6",icon:"mdi-information"},{default:s(()=>l[290]||(l[290]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"Telegram频道搜索功能说明")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 您可以同时配置 Nullbr 和下方的自定义频道列表"),n("div",null,"• 系统会整合两者的搜索结果，为您提供更广泛的资源范围")],-1)])),_:1})]),_:1})]),_:1}),o(it,{value:"tab-cleanup"},{default:s(()=>[o(st,null,{default:s(()=>[o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mb-4",icon:"mdi-alert"},{default:s(()=>l[291]||(l[291]=[n("div",{class:"text-caption"},"注意，清空 回收站/最近接收 后文件不可恢复，如果产生重要数据丢失本程序不负责！",-1)])),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.clear_recyclebin_enabled,"onUpdate:modelValue":l[97]||(l[97]=e=>ql.clear_recyclebin_enabled=e),label:"清空回收站",color:"error"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.clear_receive_path_enabled,"onUpdate:modelValue":l[98]||(l[98]=e=>ql.clear_receive_path_enabled=e),label:"清空最近接收目录",color:"error"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(Hl,{modelValue:ql.password,"onUpdate:modelValue":l[99]||(l[99]=e=>ql.password=e),label:"115访问密码",hint:"115网盘安全密码","persistent-hint":"",type:"password",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(dt,{modelValue:ql.cron_clear,"onUpdate:modelValue":l[100]||(l[100]=e=>ql.cron_clear=e),label:"清理周期",hint:"设置清理任务的执行周期","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-same-playback"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.same_playback,"onUpdate:modelValue":l[101]||(l[101]=e=>ql.same_playback=e),label:"启用",color:"info",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[292]||(l[292]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"多设备同步播放")],-1),n("div",{class:"text-caption"},"支持多个设备同时播放同一影片",-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[293]||(l[293]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"使用限制")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},"• 最多支持双IP同时播放"),n("div",{class:"mb-1"},"• 禁止多IP滥用"),n("div",null,"• 违规操作可能导致账号封禁")],-1)])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(it,{value:"category-system"},{default:s(()=>[o(st,{class:"pa-0"},{default:s(()=>[o(at,{modelValue:$l.value,"onUpdate:modelValue":l[103]||(l[103]=e=>$l.value=e),color:"primary",class:"sub-category-tabs","slider-color":"primary"},{default:s(()=>[o(La,{value:"tab-cache-config",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[294]||(l[294]=[d("mdi-cached")])),_:1}),l[295]||(l[295]=d("缓存配置 "))]),_:1}),o(La,{value:"tab-data-enhancement",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[296]||(l[296]=[d("mdi-database-eye-outline")])),_:1}),l[297]||(l[297]=d("数据增强 "))]),_:1}),o(La,{value:"tab-advanced-configuration",class:"sub-tab"},{default:s(()=>[o(a,{size:"small",start:""},{default:s(()=>l[298]||(l[298]=[d("mdi-tune")])),_:1}),l[299]||(l[299]=d("高级配置 "))]),_:1})]),_:1},8,["modelValue"]),o(tt),o(ht,{modelValue:$l.value,"onUpdate:modelValue":l[130]||(l[130]=e=>$l.value=e),touch:!1},{default:s(()=>[o(it,{value:"tab-cache-config"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Ut,{variant:"outlined",class:"mb-4"},{default:s(()=>[o(St,null,{default:s(()=>[o(vl,{class:"d-flex align-center"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[300]||(l[300]=[d("mdi-cached")])),_:1}),l[301]||(l[301]=n("span",{class:"text-h6"},"缓存管理",-1))]),_:1})]),_:1}),o(st,null,{default:s(()=>[o(yl,{type:"info",variant:"tonal",density:"compact",class:"mb-4",icon:"mdi-information"},{default:s(()=>l[302]||(l[302]=[n("div",{class:"text-caption"},"缓存清理功能可以帮助您清理插件运行过程中产生的缓存数据，解决部分因缓存导致的问题。",-1)])),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Ut,{variant:"outlined",class:"pa-4 d-flex flex-column cache-card"},{default:s(()=>[n("div",re,[o(a,{color:"primary",class:"mr-2"},{default:s(()=>l[303]||(l[303]=[d("mdi-folder-cog")])),_:1}),l[304]||(l[304]=n("span",{class:"text-subtitle-1 font-weight-medium"},"清理文件路径ID缓存",-1))]),l[306]||(l[306]=n("p",{class:"text-body-2 text-grey-darken-1 mb-3 flex-grow-1"}," 清理文件路径ID缓存，包括目录ID到路径的映射缓存。 ",-1)),o(ot,{color:"primary",variant:"outlined",loading:Tl.value,onClick:Aa,"prepend-icon":"mdi-folder-cog",block:""},{default:s(()=>l[305]||(l[305]=[d(" 清理文件路径ID缓存 ")])),_:1},8,["loading"])]),_:1})]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Ut,{variant:"outlined",class:"pa-4 d-flex flex-column cache-card"},{default:s(()=>[n("div",ce,[o(a,{color:"warning",class:"mr-2"},{default:s(()=>l[307]||(l[307]=[d("mdi-skip-next")])),_:1}),l[308]||(l[308]=n("span",{class:"text-subtitle-1 font-weight-medium"},"清理增量同步跳过路径缓存",-1))]),l[310]||(l[310]=n("p",{class:"text-body-2 text-grey-darken-1 mb-3 flex-grow-1"}," 清理增量同步跳过路径缓存，重置增量同步的跳过路径记录，用于重新处理之前跳过的文件。 ",-1)),o(ot,{color:"warning",variant:"outlined",loading:Sl.value,onClick:Da,"prepend-icon":"mdi-skip-next",block:""},{default:s(()=>l[309]||(l[309]=[d(" 清理增量同步跳过路径缓存 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(it,{value:"tab-data-enhancement"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.error_info_upload,"onUpdate:modelValue":l[104]||(l[104]=e=>ql.error_info_upload=e),label:"错误信息上传",color:"info",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.upload_module_enhancement,"onUpdate:modelValue":l[105]||(l[105]=e=>ql.upload_module_enhancement=e),label:"上传模块增强",color:"info",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.transfer_module_enhancement,"onUpdate:modelValue":l[106]||(l[106]=e=>ql.transfer_module_enhancement=e),label:"整理模块增强",color:"info",density:"compact",disabled:El.value,hint:"此功能已废弃","persistent-hint":""},null,8,["modelValue","disabled"])]),_:1}),o(xl,{cols:"12",md:"3"},{default:s(()=>[o(gl,{modelValue:ql.pan_transfer_takeover,"onUpdate:modelValue":l[107]||(l[107]=e=>ql.pan_transfer_takeover=e),label:"接管网盘整理",color:"info",density:"compact",hint:"接管 115 → 115 整理任务进行批量处理，需要存储模块为 115网盘Plus","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.upload_share_info,"onUpdate:modelValue":l[108]||(l[108]=e=>ql.upload_share_info=e),label:"上传分享链接",color:"info",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.upload_offline_info,"onUpdate:modelValue":l[109]||(l[109]=e=>ql.upload_offline_info=e),label:"上传离线下载链接",color:"info",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(Vl,{modelValue:ql.storage_module,"onUpdate:modelValue":l[110]||(l[110]=e=>ql.storage_module=e),label:"存储模块选择",items:[{title:"115网盘",value:"u115"},{title:"115网盘Plus",value:"115网盘Plus"}],chips:"","closable-chips":"",hint:ql.pan_transfer_takeover?"接管网盘整理功能必须使用 115网盘Plus":"选择使用的存储模块","persistent-hint":""},null,8,["modelValue","hint"])]),_:1})]),_:1}),ql.pan_transfer_takeover?(r(),c(kl,{key:0},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>["115网盘Plus"!==ql.storage_module?(r(),c(yl,{key:0,type:"warning",variant:"tonal",density:"compact",icon:"mdi-alert"},{default:s(()=>[l[315]||(l[315]=n("div",{class:"text-body-2 mb-1"},[n("strong",null,"提示：")],-1)),n("div",ue,[l[311]||(l[311]=d(" 接管网盘整理功能已启用，但当前存储模块为 ")),n("strong",null,i("u115"===ql.storage_module?"115网盘":ql.storage_module),1),l[312]||(l[312]=d("。 请将存储模块切换为 ")),l[313]||(l[313]=n("strong",null,"115网盘Plus",-1)),l[314]||(l[314]=d("，否则接管功能将无法生效。 "))])]),_:1})):(r(),c(yl,{key:1,type:"info",variant:"tonal",density:"compact",icon:"mdi-information"},{default:s(()=>l[316]||(l[316]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"功能说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• "),n("strong",null,"接管网盘整理："),d("启用后将接管 MoviePilot 的 115 → 115 整理任务，使用批量处理提升整理效率 ")]),n("div",{class:"mb-1"},[d("• "),n("strong",null,"与整理模块接口增强的区别："),d("此功能是接管整理流程，而整理模块接口增强是对存储接口的优化")]),n("div",null,[d("• 当前存储模块为 "),n("strong",null,"115网盘Plus"),d("，功能可以正常使用")])],-1)])),_:1}))]),_:1})]),_:1})):u("",!0),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4",class:"d-flex align-center"},{default:s(()=>[o(ot,{onClick:Ma,size:"small","prepend-icon":"mdi-identifier"},{default:s(()=>l[317]||(l[317]=[d("显示设备ID")])),_:1})]),_:1})]),_:1}),va.value?(r(),c(kl,{key:1},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Hl,{modelValue:va.value,"onUpdate:modelValue":l[111]||(l[111]=e=>va.value=e),label:"Machine ID",readonly:"",density:"compact",variant:"outlined","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),o(Ta,{variant:"tonal",class:"mt-6"},{default:s(()=>[o(na,null,{default:s(()=>[o(hl,null,{default:s(()=>[o(a,{icon:"mdi-tune-variant",class:"mr-2"}),l[318]||(l[318]=d(" 上传模块增强配置 "))]),_:1}),o(Yl,{class:"pa-4"},{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.upload_module_skip_slow_upload,"onUpdate:modelValue":l[112]||(l[112]=e=>ql.upload_module_skip_slow_upload=e),label:"秒传失败直接退出",color:"info",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.upload_module_notify,"onUpdate:modelValue":l[113]||(l[113]=e=>ql.upload_module_notify=e),label:"秒传等待发送通知",color:"info",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.upload_open_result_notify,"onUpdate:modelValue":l[114]||(l[114]=e=>ql.upload_open_result_notify=e),label:"上传结果通知",color:"info",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.upload_module_wait_time,"onUpdate:modelValue":l[115]||(l[115]=e=>ql.upload_module_wait_time=e),modelModifiers:{number:!0},label:"秒传休眠等待时间（单位秒）",type:"number",hint:"秒传休眠等待时间（单位秒）","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:ql.upload_module_wait_timeout,"onUpdate:modelValue":l[116]||(l[116]=e=>ql.upload_module_wait_timeout=e),modelModifiers:{number:!0},label:"秒传最长等待时间（单位秒）",type:"number",hint:"秒传最长等待时间（单位秒）","persistent-hint":"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:Kl.value,"onUpdate:modelValue":l[117]||(l[117]=e=>Kl.value=e),label:"跳过等待秒传的文件大小阈值",hint:"文件小于此值将跳过等待秒传（单位支持K，M，G）","persistent-hint":"",density:"compact",placeholder:"例如: 5M, 1.5G (可为空)",clearable:""},null,8,["modelValue"])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:Jl.value,"onUpdate:modelValue":l[118]||(l[118]=e=>Jl.value=e),label:"强制等待秒传的文件大小阈值",hint:"文件大于此值将强制等待秒传（单位支持K，M，G）","persistent-hint":"",density:"compact",placeholder:"例如: 5M, 1.5G (可为空)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),ql.upload_module_skip_slow_upload?(r(),c(kl,{key:0},{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[o(Hl,{modelValue:Ol.value,"onUpdate:modelValue":l[119]||(l[119]=e=>Ol.value=e),label:"秒传失败后跳过上传的文件大小阈值",hint:"秒传失败后，大于等于此值的文件将跳过上传，小于此值的文件将继续上传（单位支持K，M，G）","persistent-hint":"",density:"compact",placeholder:"例如: 100M, 1G (可为空)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):u("",!0),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[319]||(l[319]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"秒传失败直接退出：")],-1),n("div",{class:"text-caption"},"此功能开启后，对于无法秒传或者秒传等待超时的文件将直接跳过上传步骤，整理返回失败。",-1),n("div",{class:"text-caption mt-1"},' 如果设置了"秒传失败后跳过上传的文件大小阈值"，则只有大于等于该阈值的文件才会跳过上传，小于该阈值的文件将继续执行上传。 ',-1)])),_:1})]),_:1})]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-information"},{default:s(()=>l[320]||(l[320]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"115上传增强有效范围：")],-1),n("div",{class:"text-caption"},"此功能开启后，将对整个MoviePilot系统内所有调用115网盘上传的功能生效。",-1)])),_:1}),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[321]||(l[321]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"风险与免责声明")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("• 插件程序内包含可选的Sentry分析组件，详见"),n("a",{href:"https://sentry.io/privacy/",target:"_blank",style:{color:"inherit","text-decoration":"underline"}},"Sentry Privacy Policy")]),n("div",{class:"mb-1"},"• 插件程序将在必要时上传错误信息及运行环境信息"),n("div",null,"• 插件程序将记录程序运行重要节点并保存追踪数据至少72小时")],-1)])),_:1})]),_:1})]),_:1}),o(it,{value:"tab-advanced-configuration"},{default:s(()=>[o(st,null,{default:s(()=>[o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(gl,{modelValue:ql.strm_url_template_enabled,"onUpdate:modelValue":l[120]||(l[120]=e=>ql.strm_url_template_enabled=e),label:"启用 STRM URL 自定义模板 (Jinja2)",color:"primary",density:"compact",hint:"启用后可以使用 Jinja2 模板语法自定义 STRM 文件的 URL 格式","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),o(Tt,null,{default:s(()=>[ql.strm_url_template_enabled?(r(),_("div",me,[o(yl,{type:"info",variant:"tonal",density:"compact",class:"mt-2 mb-3",icon:"mdi-information"},{default:s(()=>l[322]||(l[322]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"STRM URL 生成优先级：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("1. "),n("strong",null,"URL 自定义模板"),d("（如果启用）：优先使用 Jinja2 模板渲染")]),n("div",{class:"mb-1"},[d("2. "),n("strong",null,"FUSE STRM 接管"),d("（如果启用且匹配规则）：生成指向挂载路径的 STRM 内容")]),n("div",null,[d("3. "),n("strong",null,"默认格式"),d("：使用基础设置中的「STRM文件URL格式」和「STRM URL 文件名称编码」")])],-1)])),_:1}),o(kl,{class:"mt-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Ct,{modelValue:ql.strm_url_template,"onUpdate:modelValue":l[121]||(l[121]=e=>ql.strm_url_template=e),label:"STRM URL 基础模板 (Jinja2)",hint:"支持 Jinja2 语法，可用变量和过滤器见下方说明","persistent-hint":"",rows:"4",variant:"outlined",density:"compact",placeholder:"{{ base_url }}?pickcode={{ pickcode }}{% if file_name %}&file_name={{ file_name | urlencode }}{% endif %}",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,{class:"mt-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Ct,{modelValue:ql.strm_url_template_custom,"onUpdate:modelValue":l[122]||(l[122]=e=>ql.strm_url_template_custom=e),label:"STRM URL 扩展名特定模板 (Jinja2)",hint:"为特定文件扩展名指定 URL 模板，优先级高于基础模板。格式：ext1,ext2 => template（每行一个）","persistent-hint":"",rows:"5",variant:"outlined",density:"compact",placeholder:"例如：\nmkv,mp4 => {{ base_url }}?pickcode={{ pickcode }}&file_name={{ file_name | urlencode }}&file_path={{ file_path | path_encode }}\niso => {{ base_url }}?pickcode={{ pickcode }}&file_name={{ file_name | urlencode }}",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l[323]||(l[323]=n("v-card",{variant:"outlined",class:"mt-3",color:"info"},[n("v-card-text",{class:"pa-3"},[n("div",{class:"mb-3"},[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-information",size:"small",class:"mr-2",color:"info"}),n("strong",{class:"text-body-2"},"可用变量")]),n("div",{class:"ml-6"},[n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"base_url"),d(" - 基础 URL")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"pickcode"),d(" - 文件 pickcode（仅普通 STRM） ")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"share_code"),d(" - 分享码（仅分享 STRM）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"receive_code"),d(" - 提取码（仅分享 STRM） ")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"file_id"),d(" - 文件 ID")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"file_name"),d(" - 文件名称")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"file_path"),d(" - 文件网盘路径")])])]),n("v-divider",{class:"my-3"}),n("div",{class:"mb-3"},[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-filter",size:"small",class:"mr-2",color:"info"}),n("strong",{class:"text-body-2"},"可用过滤器")]),n("div",{class:"ml-6"},[n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"urlencode"),d(" - URL 编码（如："),n("code",{class:"text-caption"},"{{ file_name | urlencode }}"),d("）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"path_encode"),d(" - 路径编码，保留斜杠（如："),n("code",{class:"text-caption"},"{{ file_path | path_encode }}"),d("）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"upper"),d(" - 转大写")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"lower"),d(" - 转小写")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"default"),d(" - 默认值（如："),n("code",{class:"text-caption"},"{{ file_name | default('unknown') }}"),d("）")])])]),n("v-divider",{class:"my-3"}),n("div",null,[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-code-tags",size:"small",class:"mr-2",color:"info"}),n("strong",{class:"text-body-2"},"模板示例")]),n("div",{class:"ml-6"},[n("div",{class:"mb-2"},[n("div",{class:"text-caption text-medium-emphasis mb-1"},"普通 STRM:"),n("code",{class:"text-caption pa-2 d-block",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.05)","border-radius":"8px","font-family":"'Courier New', monospace","word-break":"break-all",display:"block","white-space":"pre-wrap",border:"1px solid rgba(var(--v-theme-on-surface), 0.12)",padding:"10px"}},"{{ base_url }}?pickcode={{ pickcode }}{% if file_name %}&file_name={{ file_name | urlencode }}{% endif %}")]),n("div",null,[n("div",{class:"text-caption text-medium-emphasis mb-1"},"分享 STRM:"),n("code",{class:"text-caption pa-2 d-block",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.05)","border-radius":"8px","font-family":"'Courier New', monospace","word-break":"break-all",display:"block","white-space":"pre-wrap",border:"1px solid rgba(var(--v-theme-on-surface), 0.12)",padding:"10px"}},"{{ base_url }}?share_code={{ share_code }}&receive_code={{ receive_code }}&id={{ file_id }}{% if file_name %}&file_name={{ file_name | urlencode }}{% endif %}")])])])])],-1))])):u("",!0)]),_:1}),o(tt,{class:"my-6"}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(gl,{modelValue:ql.strm_filename_template_enabled,"onUpdate:modelValue":l[123]||(l[123]=e=>ql.strm_filename_template_enabled=e),label:"启用 STRM 文件名自定义模板 (Jinja2)",color:"primary",density:"compact",hint:"启用后可以使用 Jinja2 模板语法自定义 STRM 文件的文件名格式","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),o(Tt,null,{default:s(()=>[ql.strm_filename_template_enabled?(r(),_("div",pe,[o(kl,{class:"mt-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Ct,{modelValue:ql.strm_filename_template,"onUpdate:modelValue":l[124]||(l[124]=e=>ql.strm_filename_template=e),label:"STRM 文件名基础模板 (Jinja2)",hint:"支持 Jinja2 语法，可用变量和过滤器见下方说明","persistent-hint":"",rows:"3",variant:"outlined",density:"compact",placeholder:"{{ file_stem }}.strm",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,{class:"mt-2"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Ct,{modelValue:ql.strm_filename_template_custom,"onUpdate:modelValue":l[125]||(l[125]=e=>ql.strm_filename_template_custom=e),label:"STRM 文件名扩展名特定模板 (Jinja2)",hint:"为特定文件扩展名指定文件名模板，优先级高于基础模板。格式：ext1,ext2 => template（每行一个）","persistent-hint":"",rows:"4",variant:"outlined",density:"compact",placeholder:"例如：\niso => {{ file_stem }}.iso.strm\nmkv,mp4 => {{ file_stem | upper }}.strm",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l[324]||(l[324]=n("v-card",{variant:"outlined",class:"mt-3",color:"info"},[n("v-card-text",{class:"pa-3"},[n("div",{class:"mb-3"},[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-information",size:"small",class:"mr-2",color:"info"}),n("strong",{class:"text-body-2"},"可用变量")]),n("div",{class:"ml-6"},[n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"file_name"),d(" - 完整文件名（包含扩展名）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"file_stem"),d(" - 文件名（不含扩展名）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"file_suffix"),d(" - 文件扩展名（包含点号，如 .mkv） ")])])]),n("v-divider",{class:"my-3"}),n("div",{class:"mb-3"},[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-filter",size:"small",class:"mr-2",color:"info"}),n("strong",{class:"text-body-2"},"可用过滤器")]),n("div",{class:"ml-6"},[n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"upper"),d(" - 转大写（如："),n("code",{class:"text-caption"},"{{ file_stem | upper }}"),d("）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"lower"),d(" - 转小写（如："),n("code",{class:"text-caption"},"{{ file_stem | lower }}"),d("）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"sanitize"),d(" - 清理文件名中的非法字符（如："),n("code",{class:"text-caption"},"{{ file_name | sanitize }}"),d("）")]),n("div",{class:"mb-1"},[n("code",{class:"text-caption"},"default"),d(" - 默认值（如："),n("code",{class:"text-caption"},"{{ file_stem | default('unknown') }}"),d("）")])])]),n("v-divider",{class:"my-3"}),n("div",{class:"mb-3"},[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-code-tags",size:"small",class:"mr-2",color:"info"}),n("strong",{class:"text-body-2"},"模板示例")]),n("div",{class:"ml-6"},[n("div",{class:"mb-2"},[n("div",{class:"text-caption text-medium-emphasis mb-1"},"默认格式:"),n("code",{class:"text-caption pa-2 d-block",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.05)","border-radius":"8px","font-family":"'Courier New', monospace",display:"block",border:"1px solid rgba(var(--v-theme-on-surface), 0.12)",padding:"10px"}},"{{ file_stem }}.strm")]),n("div",{class:"mb-2"},[n("div",{class:"text-caption text-medium-emphasis mb-1"},"ISO 格式:"),n("code",{class:"text-caption pa-2 d-block",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.05)","border-radius":"8px","font-family":"'Courier New', monospace",display:"block",border:"1px solid rgba(var(--v-theme-on-surface), 0.12)",padding:"10px"}},"{{ file_stem }}.iso.strm")]),n("div",null,[n("div",{class:"text-caption text-medium-emphasis mb-1"},"大写文件名:"),n("code",{class:"text-caption pa-2 d-block",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.05)","border-radius":"8px","font-family":"'Courier New', monospace",display:"block",border:"1px solid rgba(var(--v-theme-on-surface), 0.12)",padding:"10px"}},"{{ file_stem | upper }}.strm")])])]),n("v-divider",{class:"my-3"}),n("div",null,[n("div",{class:"d-flex align-center mb-2"},[n("v-icon",{icon:"mdi-alert-circle-outline",size:"small",class:"mr-2",color:"warning"}),n("strong",{class:"text-body-2"},"注意事项")]),n("div",{class:"ml-6"},[n("div",{class:"mb-1 text-caption"},'• 模板渲染后的文件名会自动清理非法字符（<>:"/\\\\|?*）'),n("div",{class:"mb-1 text-caption"},"• 建议模板以 .strm 结尾，确保生成的文件具有正确的扩展名"),n("div",{class:"text-caption"},"• 如果模板未指定扩展名，系统会自动添加 .strm")])])])],-1))])):u("",!0)]),_:1}),o(tt,{class:"my-6"}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Mt,{modelValue:ql.strm_generate_blacklist,"onUpdate:modelValue":l[126]||(l[126]=e=>ql.strm_generate_blacklist=e),label:"STRM文件关键词过滤黑名单",hint:"输入关键词后按回车确认，可添加多个。包含这些词的视频文件将不会生成STRM文件。","persistent-hint":"",multiple:"",chips:"","closable-chips":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Mt,{modelValue:ql.mediainfo_download_whitelist,"onUpdate:modelValue":l[127]||(l[127]=e=>ql.mediainfo_download_whitelist=e),label:"媒体信息文件下载关键词过滤白名单",hint:"输入关键词后按回车确认，可添加多个。不包含这些词的媒体信息文件将不会下载。","persistent-hint":"",multiple:"",chips:"","closable-chips":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Mt,{modelValue:ql.mediainfo_download_blacklist,"onUpdate:modelValue":l[128]||(l[128]=e=>ql.mediainfo_download_blacklist=e),label:"媒体信息文件下载关键词过滤黑名单",hint:"输入关键词后按回车确认，可添加多个。包含这些词的媒体信息文件将不会下载。","persistent-hint":"",multiple:"",chips:"","closable-chips":"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),o(tt,{class:"my-6"}),o(kl,{class:"mt-4"},{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[o(gl,{modelValue:ql.strm_url_encode,"onUpdate:modelValue":l[129]||(l[129]=e=>ql.strm_url_encode=e),label:"STRM URL 文件名称编码",color:"info",density:"compact",hint:ql.strm_url_template_enabled?"已启用自定义模板时优先使用模板，模板渲染失败时将使用此设置作为后备方案。在模板中可使用 urlencode 过滤器进行编码。":"启用后，STRM文件中的URL会对文件名进行编码处理","persistent-hint":""},null,8,["modelValue","hint"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]))]),_:1}),o(Rt,{class:"px-3 py-2 d-flex",style:{"flex-shrink":"0"}},{default:s(()=>[o(ot,{color:"warning",variant:"text",onClick:l[132]||(l[132]=e=>wl("switch")),size:"small","prepend-icon":"mdi-arrow-left"},{default:s(()=>l[325]||(l[325]=[d(" 返回 ")])),_:1}),o(zt),o(ot,{color:"primary",variant:"text",onClick:Ia,size:"small","prepend-icon":"mdi-gift"},{default:s(()=>l[326]||(l[326]=[d(" 捐赠 ")])),_:1}),o(ot,{color:"warning",variant:"text",onClick:l[133]||(l[133]=e=>fa.value=!0),size:"small","prepend-icon":"mdi-sync"},{default:s(()=>l[327]||(l[327]=[d(" 全量同步 ")])),_:1}),o(ot,{color:"success",variant:"text",onClick:Sa,loading:zl.value,size:"small","prepend-icon":"mdi-content-save"},{default:s(()=>l[328]||(l[328]=[d(" 保存配置 ")])),_:1},8,["loading"])]),_:1})]),_:1}),o(It,{modelValue:fa.value,"onUpdate:modelValue":l[135]||(l[135]=e=>fa.value=e),"max-width":"500",persistent:""},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-h6 d-flex align-center"},{default:s(()=>[o(a,{icon:"mdi-alert-circle-outline",color:"warning",class:"mr-2"}),l[329]||(l[329]=d(" 确认操作 "))]),_:1}),o(st,null,{default:s(()=>[l[331]||(l[331]=n("div",{class:"mb-2"},"您确定要立即执行全量同步吗？",-1)),ql.full_sync_media_server_refresh_enabled?(r(),c(yl,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2",icon:"mdi-alert"},{default:s(()=>l[330]||(l[330]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"重要警告")],-1),n("div",{class:"text-caption"}," 全量同步完成后将自动刷新整个媒体库，此操作会扫描所有媒体文件，可能导致媒体服务器负载增加。请确保您已了解此风险并自行承担相应责任。 ",-1)])),_:1})):u("",!0)]),_:1}),o(Rt,null,{default:s(()=>[o(zt),o(ot,{color:"grey",variant:"text",onClick:l[134]||(l[134]=e=>fa.value=!1),disabled:Cl.value},{default:s(()=>l[332]||(l[332]=[d(" 取消 ")])),_:1},8,["disabled"]),o(ot,{color:"warning",variant:"text",onClick:$a,loading:Cl.value},{default:s(()=>l[333]||(l[333]=[d(" 确认执行 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:ga.show,"onUpdate:modelValue":l[137]||(l[137]=e=>ga.show=e),"max-width":"800"},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:ga.isLocal?"mdi-folder-search":"mdi-folder-network",class:"mr-2",color:"primary"},null,8,["icon"]),n("span",null,i(ga.isLocal?"选择本地目录":"选择网盘目录"),1)]),_:1}),o(st,{class:"px-3 py-2"},{default:s(()=>[ga.loading?(r(),_("div",_e,[o(Pt,{indeterminate:"",color:"primary"})])):(r(),_("div",fe,[o(Hl,{modelValue:ga.currentPath,"onUpdate:modelValue":l[136]||(l[136]=e=>ga.currentPath=e),label:"当前路径",variant:"outlined",density:"compact",class:"mb-2",onKeyup:v(Ha,["enter"])},null,8,["modelValue"]),o(Dt,{class:"border rounded","max-height":"300px","overflow-y":"auto"},{default:s(()=>["/"!==ga.currentPath&&"C:\\"!==ga.currentPath&&"C:/"!==ga.currentPath?(r(),c(At,{key:0,onClick:Ya,class:"py-1"},{prepend:s(()=>[o(a,{icon:"mdi-arrow-up",size:"small",class:"mr-2",color:"grey"})]),default:s(()=>[o($t,{class:"text-body-2"},{default:s(()=>l[334]||(l[334]=[d("上级目录")])),_:1}),o(Lt,null,{default:s(()=>l[335]||(l[335]=[d("..")])),_:1})]),_:1})):u("",!0),(r(!0),_(p,null,m(ga.items,(e,l)=>(r(),c(At,{key:l,onClick:l=>(e=>{e&&e.is_dir&&e.path&&(ga.currentPath=e.path,Ha())})(e),disabled:!e.is_dir,class:"py-1"},{prepend:s(()=>[o(a,{icon:e.is_dir?"mdi-folder":"mdi-file",size:"small",class:"mr-2",color:e.is_dir?"amber-darken-2":"blue"},null,8,["icon","color"])]),default:s(()=>[o($t,{class:"text-body-2"},{default:s(()=>[d(i(e.name),1)]),_:2},1024)]),_:2},1032,["onClick","disabled"]))),128)),ga.items.length?u("",!0):(r(),c(At,{key:1,class:"py-2 text-center"},{default:s(()=>[o($t,{class:"text-body-2 text-grey"},{default:s(()=>l[336]||(l[336]=[d("该目录为空或访问受限")])),_:1})]),_:1}))]),_:1})])),ga.error?(r(),c(yl,{key:2,type:"error",density:"compact",class:"mt-2 text-caption",variant:"tonal"},{default:s(()=>[d(i(ga.error),1)]),_:1})):u("",!0)]),_:1}),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(zt),o(ot,{color:"primary",onClick:Za,disabled:!ga.currentPath||ga.loading,variant:"text",size:"small"},{default:s(()=>l[337]||(l[337]=[d(" 选择当前目录 ")])),_:1},8,["disabled"]),o(ot,{color:"grey",onClick:Qa,variant:"text",size:"small"},{default:s(()=>l[338]||(l[338]=[d(" 取消 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:Ca.show,"onUpdate:modelValue":l[138]||(l[138]=e=>Ca.show=e),"max-width":"500",persistent:""},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-play-circle",class:"mr-2",color:"primary",size:"small"}),l[339]||(l[339]=n("span",null,"手动整理确认",-1))]),_:1}),o(st,{class:"px-3 py-3"},{default:s(()=>[Ca.loading||Ca.result?Ca.loading?(r(),_("div",be,[o(Pt,{indeterminate:"",color:"primary",size:"48",class:"mb-3"}),l[342]||(l[342]=n("div",{class:"text-body-2 text-grey"},"正在启动整理任务...",-1))])):Ca.result?(r(),_("div",he,[o(yl,{type:Ca.result.type,variant:"tonal",density:"compact",icon:"success"===Ca.result.type?"mdi-check-circle":"mdi-alert-circle"},{default:s(()=>[n("div",ge,i(Ca.result.title),1),n("div",xe,i(Ca.result.message),1)]),_:1},8,["type","icon"])])):u("",!0):(r(),_("div",ve,[l[341]||(l[341]=n("div",{class:"text-body-2 mb-3"},"确定要手动整理以下目录吗？",-1)),o(yl,{type:"info",variant:"tonal",density:"compact",icon:"mdi-information"},{default:s(()=>[n("div",ye,[l[340]||(l[340]=n("strong",null,"路径：",-1)),d(i(Ca.path),1)])]),_:1})]))]),_:1}),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(zt),Ca.loading||Ca.result?(r(),c(ot,{key:1,color:"primary",variant:"text",onClick:Ba,size:"small"},{default:s(()=>l[345]||(l[345]=[d(" 关闭 ")])),_:1})):(r(),_(p,{key:0},[o(ot,{color:"grey",variant:"text",onClick:Ba,size:"small"},{default:s(()=>l[343]||(l[343]=[d(" 取消 ")])),_:1}),o(ot,{color:"primary",variant:"text",onClick:qa,size:"small"},{default:s(()=>l[344]||(l[344]=[d(" 确认执行 ")])),_:1})],64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:Va.show,"onUpdate:modelValue":l[140]||(l[140]=e=>Va.show=e),"max-width":"450"},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-qrcode",class:"mr-2",color:"primary",size:"small"}),l[346]||(l[346]=n("span",null,"115网盘扫码登录",-1))]),_:1}),o(st,{class:"text-center py-4"},{default:s(()=>[Va.error?(r(),c(yl,{key:0,type:"error",density:"compact",class:"mb-3 mx-3",variant:"tonal",closable:""},{default:s(()=>[d(i(Va.error),1)]),_:1})):u("",!0),Va.loading?(r(),_("div",Ve,[o(Pt,{indeterminate:"",color:"primary",class:"mb-3"}),l[347]||(l[347]=n("div",null,"正在获取二维码...",-1))])):Va.qrcode?(r(),_("div",ke,[l[350]||(l[350]=n("div",{class:"mb-2 font-weight-medium"},"请选择扫码方式",-1)),o(Et,{modelValue:Va.clientType,"onUpdate:modelValue":l[139]||(l[139]=e=>Va.clientType=e),class:"mb-3",mandatory:"","selected-class":"primary"},{default:s(()=>[(r(),_(p,null,m(ka,e=>o(jt,{key:e.value,value:e.value,variant:"outlined",color:"primary",size:"small"},{default:s(()=>[d(i(e.label),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),n("div",we,[o(Ut,{flat:"",class:"border pa-2 mb-2"},{default:s(()=>[n("img",{src:Va.qrcode,width:"220",height:"220"},null,8,Ue)]),_:1}),n("div",ze,i(Va.tips),1),n("div",Ce,i(Va.status),1)]),o(ot,{color:"primary",variant:"tonal",onClick:gt,size:"small",class:"mb-2"},{default:s(()=>[o(a,{left:"",size:"small",class:"mr-1"},{default:s(()=>l[348]||(l[348]=[d("mdi-refresh")])),_:1}),l[349]||(l[349]=d("刷新二维码 "))]),_:1})])):(r(),_("div",Te,[o(a,{icon:"mdi-qrcode-off",size:"64",color:"grey",class:"mb-3"}),l[352]||(l[352]=n("div",{class:"text-subtitle-1"},"二维码获取失败",-1)),l[353]||(l[353]=n("div",{class:"text-body-2 text-grey"},"请点击刷新按钮重试",-1)),n("div",Se,[o(a,{icon:"mdi-alert-circle",size:"small",class:"mr-1 text-warning"}),l[351]||(l[351]=d(" 如果多次获取失败，请检查网络连接 "))])]))]),_:1}),o(tt),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(ot,{color:"grey",variant:"text",onClick:xt,size:"small","prepend-icon":"mdi-close"},{default:s(()=>l[354]||(l[354]=[d("关闭")])),_:1}),o(zt),o(ot,{color:"primary",variant:"text",onClick:gt,disabled:Va.loading,size:"small","prepend-icon":"mdi-refresh"},{default:s(()=>l[355]||(l[355]=[d(" 刷新二维码 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:wa.show,"onUpdate:modelValue":l[141]||(l[141]=e=>wa.show=e),"max-width":"450"},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-qrcode",class:"mr-2",color:"primary",size:"small"}),l[356]||(l[356]=n("span",null,"阿里云盘扫码登录",-1))]),_:1}),o(st,{class:"text-center py-4"},{default:s(()=>[wa.error?(r(),c(yl,{key:0,type:"error",density:"compact",class:"mb-3 mx-3",variant:"tonal",closable:""},{default:s(()=>[d(i(wa.error),1)]),_:1})):u("",!0),wa.loading?(r(),_("div",Me,[o(Pt,{indeterminate:"",color:"primary",class:"mb-3"}),l[357]||(l[357]=n("div",null,"正在获取二维码...",-1))])):wa.qrcode?(r(),_("div",Re,[o(Ut,{flat:"",class:"border pa-2 mb-2"},{default:s(()=>[n("img",{src:wa.qrcode,width:"220",height:"220"},null,8,Ie)]),_:1}),l[358]||(l[358]=n("div",{class:"text-body-2 text-grey mb-1"},"请使用阿里云盘App扫描二维码",-1)),n("div",Pe,i(wa.status),1)])):(r(),_("div",$e,[o(a,{icon:"mdi-qrcode-off",size:"64",color:"grey",class:"mb-3"}),l[359]||(l[359]=n("div",{class:"text-subtitle-1"},"二维码获取失败",-1)),l[360]||(l[360]=n("div",{class:"text-body-2 text-grey"},"请点击刷新按钮重试",-1))]))]),_:1}),o(tt),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(ot,{color:"grey",variant:"text",onClick:ut,size:"small","prepend-icon":"mdi-close"},{default:s(()=>l[361]||(l[361]=[d("关闭")])),_:1}),o(zt),o(ot,{color:"primary",variant:"text",onClick:ct,disabled:wa.loading,size:"small","prepend-icon":"mdi-refresh"},{default:s(()=>l[362]||(l[362]=[d(" 刷新 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:xa.show,"onUpdate:modelValue":l[144]||(l[144]=e=>xa.show=e),"max-width":"600"},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-gift",class:"mr-2",color:"primary",size:"small"}),l[363]||(l[363]=n("span",null,"支持作者 / 获取授权",-1))]),_:1}),o(st,{class:"py-4"},{default:s(()=>[o(yl,{type:"success",variant:"tonal",density:"compact",class:"mb-3",icon:"mdi-information-outline"},{default:s(()=>l[364]||(l[364]=[n("span",{class:"text-body-2"},"无论是否捐赠，插件功能均可正常使用。捐赠为自愿支持行为。",-1)])),_:1}),xa.error?(r(),c(yl,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal",closable:""},{default:s(()=>[d(i(xa.error),1)]),_:1})):u("",!0),xa.loading?(r(),_("div",Le,[o(Pt,{indeterminate:"",color:"primary",class:"mb-3"}),l[365]||(l[365]=n("div",null,"正在加载捐赠信息...",-1))])):xa.donateInfo?(r(),_("div",Ae,[o(Ut,{variant:"outlined",class:"mb-4"},{default:s(()=>[o(St,null,{default:s(()=>[o(vl,{class:"d-flex align-center"},{default:s(()=>[o(a,{icon:"mdi-shield-check",color:xa.authorizationStatus?.is_authorized?"success":"warning",class:"mr-2"},null,8,["color"]),l[366]||(l[366]=n("span",{class:"text-h6"},"授权状态",-1))]),_:1})]),_:1}),o(st,null,{default:s(()=>[xa.authorizationStatus?(r(),c(kl,{key:1},{default:s(()=>[o(xl,{cols:"12",md:"4"},{default:s(()=>[n("div",De,[l[368]||(l[368]=n("span",{class:"text-caption text-grey-darken-1"},"授权状态",-1)),o(jt,{color:xa.authorizationStatus.is_authorized?"success":"warning",size:"small",class:"mt-1"},{default:s(()=>[d(i(xa.authorizationStatus.is_authorized?"已授权":"未授权"),1)]),_:1},8,["color"])])]),_:1}),xa.authorizationStatus.is_authorized?(r(),c(xl,{key:0,cols:"12",md:"4"},{default:s(()=>[n("div",je,[l[369]||(l[369]=n("span",{class:"text-caption text-grey-darken-1"},"授权类型",-1)),o(jt,{color:xa.authorizationStatus.is_permanent?"info":"default",size:"small",class:"mt-1"},{default:s(()=>[d(i(xa.authorizationStatus.is_permanent?"永久授权":"临时授权"),1)]),_:1},8,["color"])])]),_:1})):u("",!0),xa.authorizationStatus.is_authorized&&!xa.authorizationStatus.is_permanent&&xa.authorizationStatus.authorization_expiration?(r(),c(xl,{key:1,cols:"12",md:"4"},{default:s(()=>[n("div",Ee,[l[370]||(l[370]=n("span",{class:"text-caption text-grey-darken-1"},"过期时间",-1)),n("span",Ne,i(Ra(xa.authorizationStatus.authorization_expiration)),1)])]),_:1})):u("",!0)]),_:1})):(r(),c(kl,{key:0},{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>l[367]||(l[367]=[n("div",{class:"text-caption text-grey"},"暂无授权信息",-1)])),_:1})]),_:1}))]),_:1})]),_:1}),o(yl,{type:"info",variant:"tonal",density:"compact",class:"mb-4",icon:"mdi-information"},{default:s(()=>[n("div",qe,[l[371]||(l[371]=d(" 捐赠后前往 ")),n("a",{href:`https://${xa.donateInfo.telegram_bot}`,target:"_blank",style:{color:"inherit","text-decoration":"underline"}},"Telegram Bot",8,Be),l[372]||(l[372]=d(" 使用 ")),n("code",null,i(xa.donateInfo.donate_command),1),l[373]||(l[373]=d(" 命令提交捐赠证明 "))])]),_:1}),o(at,{modelValue:xa.activeTab,"onUpdate:modelValue":l[142]||(l[142]=e=>xa.activeTab=e),color:"primary",class:"mb-4"},{default:s(()=>[xa.donateInfo.wechat?.enabled?(r(),c(La,{key:0,value:"wechat"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[374]||(l[374]=[d("mdi-wechat")])),_:1}),l[375]||(l[375]=d("微信 "))]),_:1})):u("",!0),xa.donateInfo.alipay?.enabled?(r(),c(La,{key:1,value:"alipay"},{default:s(()=>[o(a,{start:""},{default:s(()=>l[376]||(l[376]=[d("mdi-wallet")])),_:1}),l[377]||(l[377]=d("支付宝 "))]),_:1})):u("",!0)]),_:1},8,["modelValue"]),o(ht,{modelValue:xa.activeTab,"onUpdate:modelValue":l[143]||(l[143]=e=>xa.activeTab=e),touch:!1},{default:s(()=>[xa.donateInfo.wechat?.enabled?(r(),c(it,{key:0,value:"wechat"},{default:s(()=>[n("div",Ke,[o(Ut,{flat:"",class:"border pa-2 mb-3"},{default:s(()=>[xa.donateInfo.wechat.qrcode?(r(),_("img",{key:0,src:xa.donateInfo.wechat.qrcode,width:"280",height:"280",alt:"微信捐赠码"},null,8,Je)):(r(),_("div",Oe,[o(a,{icon:"mdi-image-off",size:"64",color:"grey",class:"mb-2"}),l[378]||(l[378]=n("div",{class:"text-caption text-grey"},"二维码未配置",-1))]))]),_:1}),l[379]||(l[379]=n("div",{class:"text-body-2 text-grey"},"使用微信扫描二维码进行捐赠",-1))])]),_:1})):u("",!0),xa.donateInfo.alipay?.enabled?(r(),c(it,{key:1,value:"alipay"},{default:s(()=>[n("div",Fe,[o(Ut,{flat:"",class:"border pa-2 mb-3"},{default:s(()=>[xa.donateInfo.alipay.qrcode?(r(),_("img",{key:0,src:xa.donateInfo.alipay.qrcode,width:"280",height:"280",alt:"支付宝收款码"},null,8,Ge)):(r(),_("div",We,[o(a,{icon:"mdi-image-off",size:"64",color:"grey",class:"mb-2"}),l[380]||(l[380]=n("div",{class:"text-caption text-grey"},"二维码未配置",-1))]))]),_:1}),l[382]||(l[382]=n("div",{class:"text-body-2 text-grey mb-2"},"使用支付宝扫描二维码进行捐赠",-1)),xa.donateInfo.alipay?.redpack_enabled?(r(),_("div",He,[o(tt,{class:"mb-3"}),o(yl,{type:"info",variant:"tonal",density:"compact",icon:"mdi-wallet-giftcard"},{default:s(()=>l[381]||(l[381]=[n("div",{class:"text-caption"}," 也可以使用支付宝红包口令，将口令发给机器人即可 ",-1)])),_:1})])):u("",!0)])]),_:1})):u("",!0)]),_:1},8,["modelValue"])])):(r(),_("div",Ye,[o(a,{icon:"mdi-gift-off",size:"64",color:"grey",class:"mb-3"}),l[383]||(l[383]=n("div",{class:"text-subtitle-1"},"捐赠信息未配置",-1)),l[384]||(l[384]=n("div",{class:"text-body-2 text-grey"},"请联系作者获取捐赠方式",-1))]))]),_:1}),o(tt),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(ot,{color:"grey",variant:"text",onClick:Pa,size:"small","prepend-icon":"mdi-close"},{default:s(()=>l[385]||(l[385]=[d(" 关闭 ")])),_:1}),o(zt),o(ot,{color:"primary",variant:"text",href:`https://${xa.donateInfo?.telegram_bot||"t.me/dds_oof_bot"}`,target:"_blank",size:"small","prepend-icon":"mdi-telegram"},{default:s(()=>l[386]||(l[386]=[d(" 前往 Telegram Bot ")])),_:1},8,["href"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:za.show,"onUpdate:modelValue":l[148]||(l[148]=e=>za.show=e),"max-width":"900",scrollable:""},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-code-tags",class:"mr-2",color:"primary",size:"small"}),l[387]||(l[387]=n("span",null,"生成 emby2Alist 配置",-1))]),_:1}),o(st,{class:"pa-4"},{default:s(()=>[o(yl,{type:"info",variant:"tonal",density:"compact",class:"mb-4",icon:"mdi-information"},{default:s(()=>l[388]||(l[388]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"使用说明：")],-1),n("div",{class:"text-caption"},[n("div",{class:"mb-1"},[d("1. 此配置用于 emby2Alist 插件的 "),n("code",null,"mediaPathMapping"),d(" 规则")]),n("div",{class:"mb-1"},"2. 将生成的配置复制到 emby2Alist 的配置文件中"),n("div",null,[d("3. 配置会自动匹配 strm 文件中的 "),n("code",null,"/emby/115"),d(" 路径并替换为插件重定向地址")])],-1)])),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Hl,{modelValue:za.mountDir,"onUpdate:modelValue":l[145]||(l[145]=e=>za.mountDir=e),label:"媒体服务器网盘挂载目录",hint:"对应配置中的 fuse_strm_mount_dir，例如：/emby/115","persistent-hint":"",density:"compact",variant:"outlined",placeholder:"/emby/115"},null,8,["modelValue"])]),_:1})]),_:1}),o(kl,null,{default:s(()=>[o(xl,{cols:"12"},{default:s(()=>[o(Hl,{modelValue:za.moviepilotAddress,"onUpdate:modelValue":l[146]||(l[146]=e=>za.moviepilotAddress=e),label:"MoviePilot 地址",hint:"对应配置中的 moviepilot_address","persistent-hint":"",density:"compact",variant:"outlined",placeholder:"http://localhost:3000"},null,8,["modelValue"])]),_:1})]),_:1}),o(tt,{class:"my-4"}),n("div",Ze,[l[390]||(l[390]=n("div",{class:"text-body-2 mb-2"},[n("strong",null,"生成的配置：")],-1)),za.loading?(r(),_("div",Qe,[o(Pt,{indeterminate:"",color:"primary",class:"mb-3"}),l[389]||(l[389]=n("div",{class:"text-body-2 text-grey"},"正在生成配置...",-1))])):(r(),c(Ct,{key:1,modelValue:za.generatedConfig,"onUpdate:modelValue":l[147]||(l[147]=e=>za.generatedConfig=e),label:"配置代码",hint:"复制此配置到 emby2Alist 的 mediaPathMapping 数组中","persistent-hint":"",rows:"8",variant:"outlined",density:"compact",readonly:"",class:"font-monospace",style:{"font-family":"'Courier New', monospace"}},null,8,["modelValue"]))]),o(yl,{type:"warning",variant:"tonal",density:"compact",class:"mt-3",icon:"mdi-alert"},{default:s(()=>l[391]||(l[391]=[n("div",{class:"text-body-2 mb-1"},[n("strong",null,"配置说明：")],-1),n("div",{class:"text-caption"},[n("div",null,[d("• 规则：将 "),n("code",null,"/emby/115"),d(" 替换为插件重定向地址（保留后续路径）")])],-1)])),_:1})]),_:1}),o(tt),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(ot,{color:"grey",variant:"text",onClick:pt,size:"small","prepend-icon":"mdi-close"},{default:s(()=>l[392]||(l[392]=[d("关闭")])),_:1}),o(zt),o(ot,{color:"primary",variant:"text",onClick:ft,size:"small","prepend-icon":"mdi-content-copy",disabled:za.loading||!za.generatedConfig},{default:s(()=>l[393]||(l[393]=[d(" 复制配置 ")])),_:1},8,["disabled"]),o(ot,{color:"primary",variant:"text",onClick:_t,size:"small","prepend-icon":"mdi-refresh",disabled:za.loading,loading:za.loading},{default:s(()=>l[394]||(l[394]=[d(" 重新生成 ")])),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:Ua.show,"onUpdate:modelValue":l[149]||(l[149]=e=>Ua.show=e),"max-width":"1000",scrollable:""},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-bug-check",class:"mr-2",color:"primary",size:"small"}),l[395]||(l[395]=n("span",null,"115生活事件故障检查",-1))]),_:1}),o(st,{class:"px-3 py-3"},{default:s(()=>[Ua.error?(r(),c(yl,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal",closable:""},{default:s(()=>[d(i(Ua.error),1)]),_:1})):u("",!0),Ua.loading?(r(),_("div",Xe,[o(Pt,{indeterminate:"",color:"primary",size:"48",class:"mb-3"}),l[396]||(l[396]=n("div",{class:"text-body-2 text-grey"},"正在检查...",-1))])):Ua.result?(r(),_("div",el,[o(yl,{type:Ua.result.data?.success?"success":"warning",density:"compact",class:"mb-3",variant:"tonal"},{default:s(()=>[n("div",ll,[o(a,{icon:Ua.result.data?.success?"mdi-check-circle":"mdi-alert-circle",class:"mr-1",size:"small"},null,8,["icon"]),d(" "+i(Ua.result.msg),1)]),Ua.result.data?.error_messages?.length?(r(),_("div",al,[l[397]||(l[397]=n("div",{class:"text-caption mb-1"},[n("strong",null,"发现的问题：")],-1)),(r(!0),_(p,null,m(Ua.result.data.error_messages,(e,l)=>(r(),_("div",{key:l,class:"text-caption d-flex align-start mb-1"},[o(a,{icon:"mdi-alert",size:"x-small",class:"mr-1 mt-1",color:"warning"}),n("span",null,i(e),1)]))),128))])):u("",!0)]),_:1},8,["type"]),n("div",tl,[n("div",ol,[o(a,{icon:"mdi-information",size:"small",class:"mr-2",color:"info"}),l[399]||(l[399]=n("strong",{class:"text-body-2"},"检查结果摘要",-1)),o(zt),o(ot,{size:"small",variant:"outlined","prepend-icon":"mdi-content-copy",onClick:bt},{default:s(()=>l[398]||(l[398]=[d(" 复制调试信息 ")])),_:1})]),o(Ut,{variant:"outlined",class:"pa-3"},{default:s(()=>[o(kl,{dense:""},{default:s(()=>[o(xl,{cols:"12",md:"6"},{default:s(()=>[n("div",nl,[o(a,{icon:Ua.result.data?.summary?.plugin_enabled?"mdi-check-circle":"mdi-close-circle",color:Ua.result.data?.summary?.plugin_enabled?"success":"error",size:"small",class:"mr-2"},null,8,["icon","color"]),n("span",sl,[l[400]||(l[400]=d("插件启用: ")),n("strong",null,i(Ua.result.data?.summary?.plugin_enabled?"是":"否"),1)])])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[n("div",il,[o(a,{icon:Ua.result.data?.summary?.client_initialized?"mdi-check-circle":"mdi-close-circle",color:Ua.result.data?.summary?.client_initialized?"success":"error",size:"small",class:"mr-2"},null,8,["icon","color"]),n("span",dl,[l[401]||(l[401]=d("客户端初始化: ")),n("strong",null,i(Ua.result.data?.summary?.client_initialized?"是":"否"),1)])])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[n("div",rl,[o(a,{icon:Ua.result.data?.summary?.monitorlife_initialized?"mdi-check-circle":"mdi-close-circle",color:Ua.result.data?.summary?.monitorlife_initialized?"success":"error",size:"small",class:"mr-2"},null,8,["icon","color"]),n("span",cl,[l[402]||(l[402]=d("MonitorLife初始化: ")),n("strong",null,i(Ua.result.data?.summary?.monitorlife_initialized?"是":"否"),1)])])]),_:1}),o(xl,{cols:"12",md:"6"},{default:s(()=>[n("div",ul,[o(a,{icon:Ua.result.data?.summary?.thread_running?"mdi-check-circle":"mdi-close-circle",color:Ua.result.data?.summary?.thread_running?"success":"error",size:"small",class:"mr-2"},null,8,["icon","color"]),n("span",ml,[l[403]||(l[403]=d("线程运行: ")),n("strong",null,i(Ua.result.data?.summary?.thread_running?"是":"否"),1)])])]),_:1}),o(xl,{cols:"12"},{default:s(()=>[n("div",pl,[o(a,{icon:Ua.result.data?.summary?.config_valid?"mdi-check-circle":"mdi-close-circle",color:Ua.result.data?.summary?.config_valid?"success":"error",size:"small",class:"mr-2"},null,8,["icon","color"]),n("span",_l,[l[404]||(l[404]=d("配置有效: ")),n("strong",null,i(Ua.result.data?.summary?.config_valid?"是":"否"),1)])])]),_:1})]),_:1})]),_:1})]),n("div",null,[n("div",fl,[o(a,{icon:"mdi-code-tags",size:"small",class:"mr-2",color:"primary"}),l[405]||(l[405]=n("strong",{class:"text-body-2"},"详细调试信息",-1))]),o(Ct,{"model-value":Ua.result.data?.debug_info||"",readonly:"",variant:"outlined",rows:"15","auto-grow":"",class:"text-caption font-monospace debug-info-textarea",style:{"font-size":"0.75rem","line-height":"1.6","white-space":"pre-wrap"},hint:"此信息可用于开发者诊断问题，请复制给开发者","persistent-hint":""},null,8,["model-value"])])])):u("",!0)]),_:1}),o(tt),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(ot,{color:"grey",variant:"text",onClick:yt,size:"small","prepend-icon":"mdi-close"},{default:s(()=>l[406]||(l[406]=[d("关闭")])),_:1}),o(zt),o(ot,{color:"primary",variant:"text",onClick:vt,disabled:Ua.loading,size:"small","prepend-icon":"mdi-refresh"},{default:s(()=>l[407]||(l[407]=[d(" 重新检查 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(It,{modelValue:ha.show,"onUpdate:modelValue":l[151]||(l[151]=e=>ha.show=e),"max-width":"600",persistent:""},{default:s(()=>[o(Ut,null,{default:s(()=>[o(vl,{class:"text-subtitle-1 d-flex align-center px-3 py-2 bg-primary-lighten-5"},{default:s(()=>[o(a,{icon:"mdi-import",class:"mr-2",color:"primary",size:"small"}),l[408]||(l[408]=n("span",null,"一键导入频道配置",-1))]),_:1}),o(st,{class:"py-4"},{default:s(()=>[ha.error?(r(),c(yl,{key:0,type:"error",density:"compact",class:"mb-3",variant:"tonal",closable:""},{default:s(()=>[d(i(ha.error),1)]),_:1})):u("",!0),l[409]||(l[409]=n("p",{class:"text-caption mb-2 text-grey-darken-1"},[d(" 请在此处粘贴JSON格式的频道列表。格式应为："),n("br"),n("code",null,'[{"name":"名称1", "id":"id1"}, {"name":"名称2", "id":"id2"}]')],-1)),o(Ct,{modelValue:ha.jsonText,"onUpdate:modelValue":l[150]||(l[150]=e=>ha.jsonText=e),label:"频道配置JSON",variant:"outlined",rows:"8","auto-grow":"","hide-details":"auto",placeholder:'[{"name":"Lsp115","id":"Lsp115"}]'},null,8,["modelValue"])]),_:1}),o(tt),o(Rt,{class:"px-3 py-2"},{default:s(()=>[o(zt),o(ot,{color:"grey",variant:"text",onClick:Fa,size:"small"},{default:s(()=>l[410]||(l[410]=[d(" 取消 ")])),_:1}),o(ot,{color:"primary",variant:"text",onClick:Ga,size:"small"},{default:s(()=>l[411]||(l[411]=[d(" 确认导入 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-58ba5db5"]]);export{kl as default};
